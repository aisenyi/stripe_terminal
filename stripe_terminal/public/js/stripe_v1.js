var StripeTerminal=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=55)}([function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTemplates=t.ErrorCodes=void 0,function(e){e.NO_ESTABLISHED_CONNECTION="no_established_connection",e.INVALID_READER_SHAPE="invalid_reader_shape",e.INVALID_PAYMENT_INTENT_CLIENT_SECRET="invalid_payment_intent_client_secret",e.INVALID_PAYMENT_INTENT_INPUT_SHAPE="invalid_payment_intent_input_shape",e.INVALID_CHARGE_ID_INPUT_SHAPE="invalid_charge_id_input_shape",e.NO_ACTIVE_COLLECT_PAYMENT_METHOD_ATTEMPT="no_active_collect_payment_method_attempt",e.NO_ACTIVE_READ_REUSABLE_CARD_ATTEMPT="NO_ACTIVE_READ_REUSABLE_CARD_ATTEMPT",e.CANCELED="canceled",e.CANCELED_BY_CUSTOMER="canceled_by_customer",e.CANCELABLE_ALREADY_COMPLETED="cancelable_already_completed",e.CANCELABLE_ALREADY_CANCELED="cancelable_already_canceled",e.NETWORK_ERROR="network_error",e.NETWORK_TIMEOUT="network_timeout",e.READER_CONNECTION_ERROR="reader_connection_error",e.INTERNET_CONNECTION_UNAVAILABLE="internet_connection_unavailable",e.ALREADY_CONNECTED="already_connected",e.AUTHENTICATION_ERROR="authentication_error",e.INVALID_CONNECTION_TOKEN="invalid_connection_token",e.FAILED_FETCH_CONNECTION_TOKEN="failed_fetch_connection_token",e.DISCOVERY_ALREADY_RUNNING="discovery_already_running",e.DISCOVERY_NOT_RUNNING="discovery_not_running",e.DISCOVERY_TOO_MANY_READERS="discovery_too_many_readers",e.INVALID_TYPE="invalid_type",e.INVALID_TYPE_INTERNAL="invalid_type_internal",e.ILLEGAL_STATE="illegal_state",e.INVALID_ARGUMENT="invalid_argument",e.INVALID_ON_FETCH_CONNECTION_TOKEN="invalid_on_fetch_connection_token",e.INVALID_ON_UNEXPECTED_READER_DISCONNECT="invalid_on_unexpected_reader_disconnect",e.INVALID_ON_CONNECTION_STATUS_CHANGE="invalid_on_connection_status_change",e.INVALID_ON_PAYMENT_STATUS_CHANGE="invalid_on_payment_status_change",e.INVALID_READER_VERSION="invalid_reader_version",e.JSON_RPC_PARSE_ERROR="json_rpc_parse_error",e.READER_ERROR="reader_error",e.RPC_ERROR="rpc_error",e.COMMAND_ALREADY_IN_PROGRESS="command_already_in_progress",e.REFUND_FAILED="refund_failed"}(r=t.ErrorCodes||(t.ErrorCodes={})),function(e){var t;function n(t,n){return e.CodeToMessageMap[t](n)}e.CodeToMessageMap=((t={})[r.NO_ESTABLISHED_CONNECTION]=function(){return"No established connection to the Reader. Make sure\n            you `discoverReaders()` and then `connectReader()` to one of the resolved discovered readers.\n            You should not make any other calls to the SDK until the `connectReader()` response resolves without an error or until the connectionStatus changes to 'connected'."},t[r.INVALID_READER_SHAPE]=function(){return"This should be a reader from the results of the `discoverReaders()` method call."},t[r.INVALID_PAYMENT_INTENT_CLIENT_SECRET]=function(){return"Invalid `PaymentIntent` `client_secret`. This should be the `client_secret` field from the `PaymentIntent` associated with your checkout."},t[r.INVALID_PAYMENT_INTENT_INPUT_SHAPE]=function(){return"This should be the `PaymentIntent` object resolved from the `collectPaymentMethod()` method call."},t[r.INVALID_CHARGE_ID_INPUT_SHAPE]=function(){return"The Charge ID can be found on the `PaymentIntent` object, which you should get from your backend."},t[r.NO_ACTIVE_COLLECT_PAYMENT_METHOD_ATTEMPT]=function(){return"`cancelCollectPaymentMethod()` cancels an active attempt to get a payment method from a customer. However, there was no active attempt."},t[r.NO_ACTIVE_READ_REUSABLE_CARD_ATTEMPT]=function(){return"`cancelReadSource()` cancels an active attempt to get a payment method from a customer. However, there was no active attempt."},t[r.CANCELED_BY_CUSTOMER]=function(){return"Action canceled by customer."},t[r.CANCELED]=function(){return"Action canceled."},t[r.CANCELABLE_ALREADY_COMPLETED]=function(){return"Failed to cancel as action has already completed."},t[r.CANCELABLE_ALREADY_CANCELED]=function(){return"This action has already been canceled."},t[r.NETWORK_TIMEOUT]=function(){return"Network timed out! Check and ensure your browser is connected to the internet and has a stable connection."},t[r.READER_CONNECTION_ERROR]=function(e){var t=e.rpcEndpoint;return"Could not communicate with the Reader. Please make sure your reader is online and on the same network as your device"+(t?", and that the host `"+t.url_path+"` is resolvable by your DNS provider":"")+". See https://stripe.com/docs/terminal/readers/verifone-p400#troubleshooting for more details."},t[r.INTERNET_CONNECTION_UNAVAILABLE]=function(){return"Error connecting to the internet. Please make sure your browser can connect to the web pages such as https://stripe.com."},t[r.ALREADY_CONNECTED]=function(){return"Already have an active connection to a reader. Call `disconnectReader()` first."},t[r.AUTHENTICATION_ERROR]=function(){return"Detected Authentication Error. There may be an issue with the connection token or the `Reader` might have been hot swapped."},t[r.INVALID_CONNECTION_TOKEN]=function(e){return"Invalid `ConnectionToken`. Expected Promise that resolves to pst_xxxxx. Resolved to "+e.token},t[r.FAILED_FETCH_CONNECTION_TOKEN]=function(){return"`onFetchConnectionToken` failure. Please make sure your function creates a new connection token via your backend."},t[r.DISCOVERY_ALREADY_RUNNING]=function(){return"Discovery is already running"},t[r.DISCOVERY_NOT_RUNNING]=function(){return"Discovery isn't running. Start discovery with `startDiscovery()`"},t[r.DISCOVERY_TOO_MANY_READERS]=function(){return"More than 100 readers were discovered. The list of results returned by the SDK may be truncated. Please use the locations API to group readers by locations, and use a location ID to filter your discoverReaders call. For more information, see https://stripe.com/docs/terminal/readers/fleet-management."},t[r.INVALID_TYPE_INTERNAL]=function(e){return"Invalid Type. Received "+e.actual+" but expected something of format: "+e.expectedType+". "+e.typeDescription},t[r.INVALID_TYPE]=function(e){return"Invalid object shape: "+e.actual},t[r.ILLEGAL_STATE]=function(e){return"Invalid state: "+e.msg},t[r.INVALID_ARGUMENT]=function(e){return"Invalid argument: "+e.msg},t[r.INVALID_ON_FETCH_CONNECTION_TOKEN]=function(){return"Invalid `onFetchConnectionToken` handler given.\n            You must pass a function that will retreive an connection token via your backend using your api secret key."},t[r.INVALID_ON_UNEXPECTED_READER_DISCONNECT]=function(){return"Invalid `onUnexpectedReaderDisconnect` handler given.\n            You must pass a function that will handle unexpected disconnects from a connected reader."},t[r.INVALID_ON_CONNECTION_STATUS_CHANGE]=function(){return"Invalid `onConnectionStatusChange` handler given.\n            You must pass a function that will accept an updated connection status as an argument."},t[r.INVALID_ON_PAYMENT_STATUS_CHANGE]=function(){return"Invalid `onPaymentStatusChange` handler given.\n            You must pass a function that will accept an updated payment status as an argument."},t[r.INVALID_READER_VERSION]=function(){return"Invalid Reader version. Please upgrade your device to use this version of the SDK"},t[r.JSON_RPC_PARSE_ERROR]=function(e){return"Failed to parse json rpc content: "+e.content},t[r.NETWORK_ERROR]=function(e){return"Unknown Network Error Occured: "+e.content},t[r.READER_ERROR]=function(e){return"Reader Error: "+e.msg},t[r.RPC_ERROR]=function(e){return""+e.msg},t[r.COMMAND_ALREADY_IN_PROGRESS]=function(e){return"Terminal command "+e.command+" is already in progress and cannot be performed again."},t[r.REFUND_FAILED]=function(){return"The charge could not be refunded; the customerâ€™s bank or card issuer was unable to process the refund."},t),e.generateErrorMessage=n,e.generateError=function(e,t){return{code:e.toLowerCase(),message:n(e,t)}}}(t.ErrorTemplates||(t.ErrorTemplates={}))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){var r=e.call(this,n.message)||this;return r.error=n,Object.setPrototypeOf(r,t.prototype),r}return r(t,e),t.prototype.toErrorResponse=function(){return{error:this.error}},t}(Error);t.default=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),i=n(16),s=function(){function e(){}return e.setCollectors=function(e){this.collectors=e},e.forwardToCollectors=function(e){this.collectors.forEach(function(t){return t.collect(e)})},e.log=function(t,n){e.textLog("log",n,t)},e.debug=function(t){var n="";n=t instanceof Error?i.extractErrorMsg(t):JSON.stringify(t),e.textLog("debug",o.LogLevel.DEBUG,n)},e.info=function(t){e.textLog("log",o.LogLevel.INFO,t)},e.warning=function(t){e.textLog("log",o.LogLevel.WARN,t)},e.user_error=function(t){e.textLog("user_error",o.LogLevel.WARN,t)},e.error=function(t){e.textLog("log",o.LogLevel.ERROR,t)},e.exception=function(t){var n=r(r({},e.baseLog("exception",o.LogLevel.ERROR)),{type:"exception",exception:i.extractErrorMsg(t)});e.forwardToCollectors(n)},e.textLog=function(t,n,o){var i=r({type:"text",message:o},e.baseLog(t,n));e.forwardToCollectors(i)},e.baseLog=function(e,t){return{log_level:t,tag:e}},e.collectors=[],e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectChecker=t.ArrayChecker=t.TypeofChecker=t.NullableType=t.OneofType=t.ExactValueType=t.RegexType=t.NullType=t.AssertUtils=void 0;var r=n(9),o=n(2),i=n(4),s=n(0),a=n(6),c=function(){function e(){}return e.assert=function(e,t,n,c,u){if(void 0===n&&(n={}),void 0===u&&(u=r.LogLevel.ERROR),!e){i.default.count("AssertUtils","FailedAssertion","FailedAssert","ERROR",t);var l=s.ErrorTemplates.generateErrorMessage(t,n),f=c?s.ErrorTemplates.generateErrorMessage(c,{msg:l}):l;throw o.default.log(f,u),new a.default({message:f,code:t})}},e.checkUserGivenArg=function(t,n,o){void 0===o&&(o={}),e.assert(t,n,o,s.ErrorCodes.INVALID_ARGUMENT,r.LogLevel.WARN)},e.checkState=function(t,n,r){void 0===r&&(r={}),e.assert(t,n,r,s.ErrorCodes.ILLEGAL_STATE)},e.checkType=function(e,t,n){if(!e.matchesType(t)){i.default.count("AssertUtils","FailedAssertion","TypeError","ERROR",n);var r=null==n?"":s.ErrorTemplates.generateErrorMessage(n),a=JSON.stringify(t,null,2),c={actual:a,expectedType:JSON.stringify(e.getTypeDescriptor(),null,2),typeDescription:r};throw o.default.error(s.ErrorTemplates.generateErrorMessage(s.ErrorCodes.INVALID_TYPE_INTERNAL,c)),new Error(s.ErrorTemplates.generateErrorMessage(s.ErrorCodes.INVALID_TYPE,{actual:a}))}},e}();t.AssertUtils=c;var u=function(){function e(){}return e.prototype.matchesType=function(e){return null==e},e.prototype.getTypeDescriptor=function(){return"null | undefined"},e}();t.NullType=u;var l=function(){function e(e,t){this.regex=e,this.regexName=t}return e.prototype.matchesType=function(e){return this.regex.test(e)},e.prototype.getTypeDescriptor=function(){return(this.regexName?"("+this.regexName+") ":"")+this.regex.toString()},e}();t.RegexType=l;var f=function(){function e(e){this.expected=e}return e.prototype.matchesType=function(e){return JSON.stringify(this.expected)===JSON.stringify(e)},e.prototype.getTypeDescriptor=function(){return this.expected},e}();t.ExactValueType=f;var p=function(){function e(e,t){this.checker1=e,this.checker2=t}return e.prototype.matchesType=function(e){return this.checker1.matchesType(e)||this.checker2.matchesType(e)},e.prototype.getTypeDescriptor=function(){return{"<oneOf>":[this.checker1.getTypeDescriptor(),this.checker2.getTypeDescriptor()]}},e}();t.OneofType=p,t.NullableType=function(e){return new p(new u,e)};var d=function(){function e(e){this.type=e}return e.prototype.matchesType=function(e){return typeof e===this.type},e.prototype.getTypeDescriptor=function(){return this.type},e}();t.TypeofChecker=d;var h=function(){function e(e){this.checker=e}return e.prototype.matchesType=function(e){var t=this;return!!Array.isArray(e)&&e.reduce(function(e,n){return e&&t.checker.matchesType(n)},!0)},e.prototype.getTypeDescriptor=function(){return[this.checker.getTypeDescriptor()]},e}();t.ArrayChecker=h;var y=function(){function e(e,t){void 0===t&&(t=!1),this.objectTypeDef=e,this.strictMode=t}return e.prototype.matchesType=function(e){var t=this;if(!new d("object").matchesType(e)||null===e)return!1;var n=!this.strictMode||Object.keys(e).reduce(function(e,n){return e&&n in t.objectTypeDef},!0),r=Object.keys(this.objectTypeDef).reduce(function(n,r){return n&&t.objectTypeDef[r].matchesType(e[r])},!0);return n&&r},e.prototype.getTypeDescriptor=function(){var e=this,t={};return Object.keys(this.objectTypeDef).forEach(function(n){t[n]=e.objectTypeDef[n].getTypeDescriptor()}),t},e}();t.ObjectChecker=y},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(6),c=function(){function e(){}return e.setCollectors=function(e){this.collectors=e},e.forwardToCollectors=function(e){this.collectors.forEach(function(t){return t.collect(e)})},e.collect=function(e){this.captureMeter("Tracer",e.service,e.method,e.start_time_ms,e.total_time_ms,"success"===e.type,e.errorCode)},e.count=function(t,n,o,i,s){var a=r({type:"count"},e.baseEvent(t,n,o,i,s));e.forwardToCollectors(a)},e.gauge=function(t,n,o,i,s,a){var c=r({type:"gauge",measurement:s},e.baseEvent(t,n,o,i,a));e.forwardToCollectors(c)},e.meterAsync=function(e,t,n,r){return o(this,void 0,void 0,function(){var o,c,u,l,f,p;return i(this,function(i){switch(i.label){case 0:o=(new Date).valueOf(),c=null,u=!0,l=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r()];case 2:return c=i.sent(),[3,4];case 3:return f=i.sent(),u=!1,c=f,f instanceof s.default&&(l=f.error.code),f instanceof a.default&&(l=f.error.code),[3,4];case 4:return p=(new Date).valueOf()-o,[2,{result:function(){if(u)return c;throw c},meter:this.captureMeter(e,t,n,o,p,u,l)}]}})})},e.captureMeter=function(t,n,o,i,s,a,c){var u=r({type:"meter",duration:s},e.baseEvent(t,n,o,a?"OK":"ERROR",c));return e.forwardToCollectors(u),u},e.baseEvent=function(e,t,n,r,o){return{domain:e,scope:t,event:n,result:r,error_code:o}},e.collectors=[],e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVersionCompatible=t.extractSemanticVersion=t.VERSION_INFO=t.getDeviceInfo=void 0;var r=n(7),o=n(35),i=n(53),s=n(52),a=n(51),c=i.detect()||{os:"unknown",name:"unknown",version:"unknown"},u=(new s.StorageMgr).getStorageBin("posdeviceid"),l=new a.DeviceFingerprinter(u).getDeviceFingerprint();function f(e){return e.split(/\.|-/).map(function(e){return parseInt(e,10)})}t.getDeviceInfo=function(){var e=c.os+":"+c.name;return{device_class:"POS",device_uuid:l,host_os_version:c.os,hardware_model:{pos_info:{description:e}},app_model:{app_id:o.StringUtils.sanitizePageTitle(document.title)||window.location.hostname,app_version:""+window.location.origin+window.location.pathname}}},t.VERSION_INFO={client_type:"JS_SDK",client_version:r.PackageUtils.getVersion()},t.extractSemanticVersion=f,t.isVersionCompatible=function(e,t){var n=f(e),r=f(t);if(n.length!==r.length)throw new Error("Invalid Semantic Version Check");for(var o=0;o<n.length;o++){if(r[o]>n[o])return!0;if(r[o]<n[o])return!1}return!0}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){var r=e.call(this,n.message)||this;return r.error=n,Object.setPrototypeOf(r,t.prototype),r}return r(t,e),t.prototype.toErrorResponse=function(){return{error:this.error}},t}(Error);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PackageUtils=void 0;var r=n(54),o=function(){function e(){}return e.getProjectName=function(){return r.name},e.getVersion=function(){return r.version},e.getProjectConfig=function(){return r.pos},e}();t.PackageUtils=o,t.default=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r};Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),s=n(5),a=function(){function e(){}return e.setCollectors=function(e){this.collectors=e},e.forwardToCollectors=function(e){this.collectors.forEach(function(t){return t.collect(e)})},e.collect=function(t){e.logPoints.push({timestamp:(new Date).valueOf(),log:t})},e.getActiveTraceId=function(){var t=o(e.activeTraceIds);return e.transactionId&&t.unshift("txn!"+e.transactionId),t.join(e.TRACE_ID_SEPARATOR)},e.setTransactionId=function(t){e.transactionId=t},e.clearTransactionId=function(){e.transactionId=null},e.traceFn=function(t,n,r,o){return void 0===o&&(o={recordReqRespOnErrorOnly:!1}),function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var u=e.openTracingContext(r),l=u.traceId,f=u.startTime,p=u.parentTraceId,d=r||t.name,h=JSON.stringify({args:a}),y={id:l,parent_trace_id:p,start_time_ms:f,service:n,method:d,request:h,version_info:s.VERSION_INFO,trace_points:[]};try{var _=t.apply(this,a);if(_ instanceof Promise)return e.tracePromise(y,_,o),_;if(i.isErrorResponse(_))return e.exceptionTrace(y,JSON.stringify(_)),_;var v=JSON.stringify(_);return e.successTrace(y,v,o),_}catch(t){throw e.exceptionTrace(y,t),t}}},e.openTracingContext=function(t){void 0===t&&(t="unknown");var n=t+"!"+Math.floor(1e7*Math.random()),r=e.getActiveTraceId();return e.activeTraceIds.push(n),{traceId:n,parentTraceId:r,startTime:(new Date).valueOf()}},e.closeTracingContext=function(t){var n=e.activeTraceIds.indexOf(t.id);-1!==n&&e.activeTraceIds.splice(n,1);var o=e.logPoints.map(function(n){return{type:"log",time_offset_ms:e.calculateElapsedTimeMs(t.start_time_ms,n.timestamp),log:n.log}});return e.logPoints=[],r(r({},t),{total_time_ms:e.calculateElapsedTimeMs(t.start_time_ms),trace_points:o})},e.successTrace=function(t,n,o){var i=r(r({},e.closeTracingContext(t)),{type:"success",response:n});o.recordReqRespOnErrorOnly&&(i.request="",i.response=""),e.forwardToCollectors(i)},e.exceptionTrace=function(t,n){var o=i.extractExposedError(n),s=r(r({},e.closeTracingContext(t)),{type:"exception",exception:o.message,errorCode:o.type,response:JSON.stringify(r({},o))});e.forwardToCollectors(s)},e.tracePromise=function(t,n,o){var s=r({},t);n.then(function(t){if(i.isErrorResponse(t))e.exceptionTrace(s,JSON.stringify(t));else{var n=JSON.stringify(t);e.successTrace(s,n,o)}}).catch(function(t){e.exceptionTrace(s,t)})},e.calculateElapsedTimeMs=function(e,t){return void 0===t&&(t=(new Date).valueOf()),t-e},e.collectors=[],e.TRACE_ID_SEPARATOR=">",e.transactionId=null,e.activeTraceIds=[],e.logPoints=[],e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(e){e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(t.LogLevel||(t.LogLevel={}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function i(e){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,new Promise(function(t){return setTimeout(t,e)})]})})}function s(e,t,n){return void 0===t&&(t=function(){return!0}),void 0===n&&(n=2),e().catch(function(r){if(0===n)throw r;return Promise.resolve().then(function(){return t(r)}).then(function(o){return o?s(e,t,n-1):Promise.reject(r)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.retryWithBackoff=t.retry=t.timeout=t.sleep=t.liftToPromise=void 0,t.liftToPromise=function(e){return Promise.resolve().then(function(){return e})},t.sleep=i,t.timeout=function(e,t){return r(this,void 0,void 0,function(){return o(this,function(n){return[2,i(t).then(function(){return e()})]})})},t.retry=s,t.retryWithBackoff=function(e,t,n,a){var c=this;return void 0===a&&(a=2500),s(e,function(e){return r(c,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,t(e)];case 1:return n.sent()?[4,i(a)]:[2,!1];case 2:return n.sent(),[2,!0]}})})},n)}},function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(e){return e&&DataView.prototype.isPrototypeOf(e)},o=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};l.prototype.append=function(e,t){e=a(e),t=c(t);var n=this.map[e];this.map[e]=n?n+","+t:t},l.prototype.delete=function(e){delete this.map[a(e)]},l.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},l.prototype.set=function(e,t){this.map[a(e)]=c(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),u(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),u(e)},t.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},y.call(_.prototype),y.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var s=[301,302,303,307,308];m.redirect=function(e,t){if(-1===s.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=l,e.Request=_,e.Response=m,e.fetch=function(e,n){return new Promise(function(r,o){var i=new _(e,n),s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:function(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;r(new m(t,e))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&t.blob&&(s.responseType="blob"),i.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function d(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&r(e))this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!o(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=h(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=p(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(e,t){var n=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=function(e){var t=e.toUpperCase();return i.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function m(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiscoveryMethodFactory=t.SimulatedDiscoveryMethod=t.SIMULATED_READER=t.SIMULATED_LABEL=t.SIMULATED_ID=t.InternetDiscoveryMethod=t.BaseDiscoverMethod=t.DEFAULT_DISCOVERY_CONFIG=void 0;var s=n(26),a=n(3),c=n(25),u=n(0),l=n(2);t.DEFAULT_DISCOVERY_CONFIG={method:"internet"};var f=function(){return function(e){this.config=e}}();t.BaseDiscoverMethod=f;var p=function(e){function t(t,n,r){void 0===r&&(r=5e3);var o=e.call(this,t)||this;return o.discoveryClient=n,o.queryIntervalMs=r,o}return r(t,e),t.prototype.retrieveReader=function(e){return this.discoveryClient.retrieveReader(e)},t.prototype.startDiscovery=function(e,t){var n=this;this.intervalId=s.setIntervalAndExecute(function(){return o(n,void 0,void 0,function(){var n,r;return i(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.discoveryClient.discoverReaders({location:this.config.location,device_type:this.config.device_type})];case 1:return(n=o.sent()).has_more&&l.default.error(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.DISCOVERY_TOO_MANY_READERS)),e(n.data),[3,3];case 2:return r=o.sent(),t(r),[3,3];case 3:return[2]}})})},this.queryIntervalMs)},t.prototype.stopDiscovery=function(){this.intervalId&&clearInterval(this.intervalId)},t}(f);t.InternetDiscoveryMethod=p,t.SIMULATED_ID="SIMULATOR",t.SIMULATED_LABEL="Reader Simulator",t.SIMULATED_READER={id:t.SIMULATED_ID,object:"terminal.reader",device_type:c.DeviceType.P400,ip_address:"0.0.0.0",label:t.SIMULATED_LABEL,serial_number:t.SIMULATED_ID,location:"st_simulated",status:"online"};var d=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.retrieveReader=function(e){return e!==t.SIMULATED_ID?Promise.reject():Promise.resolve(t.SIMULATED_READER)},n.prototype.startDiscovery=function(e){e([t.SIMULATED_READER])},n.prototype.stopDiscovery=function(){},n}(f);t.SimulatedDiscoveryMethod=d;var h=function(){function e(e){this.discoveryClient=e}return e.prototype.createDiscoveryMethod=function(e){return e.simulated?new d(e):new p(e,this.discoveryClient)},e}();t.DiscoveryMethodFactory=h;var y=function(){function e(e){this.discoveryMethodFactory=e,this.activeDiscovery=null,this.lastResult=null,this.nextResult=null}return e.prototype.getDiscoveredReaders=function(){return a.AssertUtils.assert(!!this.activeDiscovery,u.ErrorCodes.DISCOVERY_NOT_RUNNING),this.lastResult},e.prototype.retrieveReader=function(e){return o(this,void 0,void 0,function(){return i(this,function(n){return[2,this.discoveryMethodFactory.createDiscoveryMethod({simulated:e===t.SIMULATED_ID}).retrieveReader(e)]})})},e.prototype.discoverReaders=function(e){return void 0===e&&(e=t.DEFAULT_DISCOVERY_CONFIG),o(this,void 0,void 0,function(){var t=this;return i(this,function(n){return this.activeDiscovery||(this.nextResult=new Promise(function(n,r){t.startDiscovery(e,function(e){return n(e)},function(e){return r(e)})}).then(function(e){return t.stopDiscovery(),e},function(e){return Promise.reject(e)})),[2,this.nextResult]})})},e.prototype.startDiscovery=function(e,n,r){var o=this;void 0===e&&(e=t.DEFAULT_DISCOVERY_CONFIG),a.AssertUtils.assert(!this.activeDiscovery,u.ErrorCodes.DISCOVERY_ALREADY_RUNNING),this.activeDiscovery=this.discoveryMethodFactory.createDiscoveryMethod(e);this.activeDiscovery.startDiscovery(function(e){var t={discoveredReaders:e};JSON.stringify(t)!==JSON.stringify(o.lastResult)&&(o.lastResult=t,n(o.lastResult))},function(e){o.stopDiscovery(),r(e)})},e.prototype.stopDiscovery=function(){this.activeDiscovery&&this.activeDiscovery.stopDiscovery(),this.lastResult=null,this.activeDiscovery=null,this.nextResult=null},e}();t.default=y},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.IxStripeClient=t.overrideBaseURL=void 0;var s=n(5),a=n(8),c=n(14),u=n(47),l="https://api.stripe.com/",f=JSON.stringify({pos_version_info:s.VERSION_INFO,pos_device_info:s.getDeviceInfo()});t.overrideBaseURL=function(e){l=e};var p=function(){function e(e,t,n,r){void 0===r&&(r="v1"),this.resourceName=e,this.httpClient=t,this.networkMonitor=n,this.resourceVersion=r}return e.prototype.createHeaders=function(e){var t=new Headers;return t.append("Stripe-Version","2018-08-23"),t.append("X-Stripe-Terminal-User-Agent",encodeURI(f)),t.append("X-Stripe-Client-Trace-Id",a.default.getActiveTraceId()),e&&t.append("Authorization","Bearer "+e),t},e.prototype.createUrl=function(e){return function(e,t,n){return l+e+"/"+t+(n?"/"+n:"")}(this.resourceVersion,this.resourceName,e)},e.prototype.makeRequest=function(e,t){var n=this;return this.networkMonitor.withMonitoring(this.resourceName,e,function(){return o(n,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t()];case 1:return[2,n.sent()];case 2:throw(e=n.sent())instanceof c.default?u.default.fromHttpError(e):e;case 3:return[2]}})})})},e.prototype.postFormEncoded=function(e,t,n){var r=this;return this.makeRequest(e,function(){return r.httpClient.postFormEncoded(r.createUrl(e),t,r.createHeaders(n))})},e.prototype.get=function(e,t,n){var r=this;return this.makeRequest(e,function(){return r.httpClient.get(r.createUrl(e),t,r.createHeaders(n))})},e}();t.IxStripeClient=p;var d=function(e){function t(t,n,r,o){return void 0===o&&(o="v1"),e.call(this,t,n,r,o)||this}return r(t,e),t.prototype.postResource=function(t,n){return e.prototype.postFormEncoded.call(this,null,t,n)},t.prototype.loadResource=function(t,n,r){return e.prototype.get.call(this,t,n,r)},t.prototype.queryResource=function(t,n){return e.prototype.get.call(this,null,t,n)},t}(p);t.default=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),s=function(e){function t(n,r){var o=e.call(this,i.ErrorTemplates.generateError(i.ErrorCodes.NETWORK_ERROR,{content:r}))||this;return o.response=n,o.responseBodyText=r,Object.setPrototypeOf(o,t.prototype),o}return r(t,e),t}(o.default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),s=function(e){function t(n){var r=e.call(this,{message:n,code:i.ErrorCodes.READER_ERROR})||this;return Object.setPrototypeOf(r,t.prototype),r}return r(t,e),t}(o.default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WithApplicationErrorsLiftedToTry=t.extractExposedError=t.extractErrorType=t.extractErrorCode=t.extractErrorMsg=t.runWithApplicationErrorsLifted=t.isErrorResponse=t.isExposedError=void 0;var i=n(1),s=n(15),a=n(6);function c(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message}function u(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return[2,n.sent()];case 2:if((t=n.sent())instanceof i.default)return[2,t.toErrorResponse()];throw t;case 3:return[2]}})})}function l(e){try{var t=JSON.parse(e);return"message"in t?t.message:"error"in t?t.error.message:JSON.stringify(t)}catch(t){return e.message||e}}function f(e){try{var t=JSON.parse(e);return"code"in t?t.code:"error"in t?t.error.code:"no_code"}catch(t){return e.code||"no_code"}}function p(e){if(e instanceof i.default||e instanceof a.default||e instanceof s.default)return"EXPECTED_ERROR";var t=f(e),n=l(e),r=["Action canceled by customer","CollectPaymentMethodOp Tipping is still under development and is not available for use.","Could not communicate with the Reader.","Error connecting to Reader.","Only test mode keys are allowed with the simulator","Reader is currently in use.","Reusable card creation is currently not in progress","SetReaderDisplayOp must have a valid type. ","The Location parameter does not match the Location on the Connection Token.","The POS is no longer authenticated","The Stripe Terminal ConnectionToken has already been redeemed","The Stripe Terminal ConnectionToken has expired.","The card number specified in the EMV data is incorrect.","The reader is performing network selection, and is temporarily unavailable","Transaction is currently not in progress.","Unable to reach Stripe, reader offline"];if(["api_key_expired","canceled","card_declined","command_already_in_progress","expired_card","incorrect_number","invalid_expiry_month","invalid_expiry_year","invalid_number","network_timeout","payment_intent_unexpected_state","processing_error","resource_missing"].includes(t))return"EXPECTED_ERROR";for(var o=0;o<r.length;o++)if(n.includes(r[o]))return"EXPECTED_ERROR";return"UNEXPECTED_ERROR"}t.isExposedError=c,t.isErrorResponse=function(e){return"object"==typeof e&&null!==e&&c(e.error)},t.runWithApplicationErrorsLifted=u,t.extractErrorMsg=l,t.extractErrorCode=f,t.extractErrorType=p,t.extractExposedError=function(e){return{message:l(e),code:f(e),type:p(e)}},t.WithApplicationErrorsLiftedToTry=function(e,t,n){var r=n.value;return n.value=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return u(function(){return r.apply(e,t)})},n}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.b64DecodeUnicode=t.b64EncodeUnicode=t.RpcEndpoint=void 0;var i=n(8),s=n(10),a=n(5),c=n(33),u=n(0),l=n(14),f=function(){return function(){}}();function p(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}function d(e){return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}t.RpcEndpoint=f,t.b64EncodeUnicode=p,t.b64DecodeUnicode=d;var h=function(){function e(e,t,n,r,o){this.serviceName=e,this.postClient=t,this.rpcEndpoint=n,this.networkMonitor=r,this.retryBackoff=o,this.simulatorConfiguration={}}return e.prototype.getUntracedMethods=function(){return[]},e.prototype.getRpcEndpoint=function(){return this.rpcEndpoint},e.prototype.setSimulatorConfig=function(e){this.simulatorConfiguration=e},e.prototype.rpc=function(t,n,f,h){return void 0===h&&(h={isRetriable:!0}),r(this,void 0,void 0,function(){var r,y,_,v,m,b,E=this;return o(this,function(o){return r=this.rpcEndpoint.port?":"+this.rpcEndpoint.port:"",y=this.rpcEndpoint.url_path+r+"/protojsonservice/"+this.serviceName,_={id:Date.now(),service:this.serviceName,method:t,content:p(JSON.stringify(n)),session_token:f||"",version_info:a.VERSION_INFO,parent_trace_id:i.default.getActiveTraceId()||"",device_info:a.getDeviceInfo()},this.rpcEndpoint.simulator&&this.simulatorConfiguration&&0!==Object.keys(this.simulatorConfiguration).length&&(_.config=JSON.stringify(this.simulatorConfiguration)),v=function(e){return h.isRetriable&&e.errorType()===c.RpcErrorType.RPC&&c.isRetriableRpcNetworkError(e.rpcEc())},b=m=function(){return E.postClient.post(y,_).catch(function(e){return{rpc_error_code:"NETWORK_UNAVAILABLE",app_error_code:"OK",error:e instanceof l.default?e.error.message:e.message}}).then(function(e){if("RPC_OK"!==e.rpc_error_code||"OK"!==e.app_error_code){var t=new c.default(e);return Promise.reject(t)}try{return JSON.parse(d(e.content))}catch(t){throw new Error(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.JSON_RPC_PARSE_ERROR,{content:e.content}))}})},0===this.getUntracedMethods().filter(function(e){return e===t}).length&&(b=function(){return E.networkMonitor.withMonitoring(E.serviceName,t,m)}),[2,s.retryWithBackoff(b,v,e.NUM_RETRIES,this.retryBackoff)]})})},e.NUM_RETRIES=1,e}();t.default=h},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(2),a=n(0),c=n(6),u=function(){function e(e,t){this.fetchConnectionTokenFn=e,this.networkMonitor=t,this.activeCredentials=null}return e.prototype.getActiveCredentials=function(){return r(this,void 0,void 0,function(){var e=this;return o(this,function(t){return this.activeCredentials||(this.activeCredentials=this.networkMonitor.withMonitoring("ConnectionTokenMgr","get",function(){return r(e,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:e=this.fetchConnectionTokenFn(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e];case 2:return t=r.sent(),i.AssertUtils.assert(!!t&&"string"==typeof t&&t.startsWith("pst_"),a.ErrorCodes.INVALID_CONNECTION_TOKEN,{token:t}),[2,t];case 3:throw r.sent(),this.invalidateConnectionToken(),n=a.ErrorCodes.FAILED_FETCH_CONNECTION_TOKEN,s.default.error(a.ErrorTemplates.generateErrorMessage(n)),new c.default(a.ErrorTemplates.generateError(n));case 4:return[2]}})})})),[2,this.activeCredentials]})})},e.prototype.invalidateConnectionToken=function(){this.activeCredentials=null},e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputLogLevel=void 0,function(e){e.NONE="none",e.VERBOSE="verbose"}(t.OutputLogLevel||(t.OutputLogLevel={}))},function(e,t,n){"use strict";function r(e,t){var n;try{void 0===(n=e())&&(n=t)}catch(e){n=t}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.tryOrDefault=void 0,t.tryOrDefault=r,t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Synchronizer=void 0;var r=function(){function e(){this.serializedPromise=Promise.resolve()}return e.prototype.synchronize=function(e){return this.serializedPromise=this.serializedPromise.then(function(){return e()},function(){return e()}),this.serializedPromise},e}();t.Synchronizer=r,t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeriodicFlusher=void 0;var r=n(26),o=n(2),i=function(){function e(e,t){void 0===e&&(e=45e3),void 0===t&&(t=10),this.flushInterval=e,this.maxCapacity=t,this.items=[]}return e.prototype.start=function(){var e=this;this.interval=r.setIntervalAndExecute(function(){return e.flush()},this.flushInterval);try{var t=window.onbeforeunload;window.onbeforeunload=function(n){return e.flush(),t?t(n):null}}catch(e){}},e.prototype.collect=function(e){this.items.push(e),this.items.length===this.maxCapacity&&this.flush()},e.prototype.flush=function(){if(this.items.length>0){var e=this.items;this.items=[],this.doFlush(e).catch(function(e){return o.default.debug(e)})}},e.prototype.shutdown=function(){clearInterval(this.interval)},e}();t.PeriodicFlusher=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkMonitor=void 0;var i=n(4),s=function(){function e(){}return e.prototype.withMonitoring=function(e,t,n){return r(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,i.default.meterAsync("NetworkMonitor",e,t,n)];case 1:return[2,r.sent().result()]}})})},e}();t.NetworkMonitor=s,t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(11);var r=n(4),o=n(2),i=n(10),s=n(1),a=n(0),c=n(14);var u=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.requestTimeoutMs=e,this.fetchFn=t}return e.prototype.get=function(e,t,n){void 0===n&&(n=new Headers);var r={method:"GET",headers:n},o=e+"?"+Object.keys(t).filter(function(e){return void 0!==t[e]}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&");return this.doFetch(o,r)},e.prototype.post=function(e,t,n){void 0===n&&(n=new Headers),n.append("Content-Type","application/json");var r={method:"POST",body:JSON.stringify(t),headers:n};return this.doFetch(e,r)},e.prototype.postFormEncoded=function(e,t,n){void 0===n&&(n=new Headers),n.append("Content-Type","application/x-www-form-urlencoded");var r={method:"POST",body:t.toString(),headers:n};return this.doFetch(e,r)},e.prototype.doFetch=function(e,t){var n=this,u=[this.fetchFn?this.fetchFn(e,t):fetch(e,t)];if(this.requestTimeoutMs){var l=i.timeout(function(){return n.createFakeTimeoutResponse()},this.requestTimeoutMs);u.push(l)}return Promise.race(u).then(function(e){return 408===e.status&&o.default.error(a.ErrorTemplates.generateErrorMessage(a.ErrorCodes.NETWORK_TIMEOUT)),e.ok?e.json():function(e,t){return function(e){return e.text()}(t).then(function(n){throw r.default.count("HttpClient",e,"HttpFailure","ERROR",""+t.status),new c.default(t,n)})}(t.method,e)},function(){throw new s.default(a.ErrorTemplates.generateError(a.ErrorCodes.NETWORK_TIMEOUT))})},e.prototype.createFakeTimeoutResponse=function(){return new Response(a.ErrorTemplates.generateErrorMessage(a.ErrorCodes.NETWORK_TIMEOUT),{status:408,statusText:"Client Timeout"})},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceType=void 0;var a=n(13),c=n(24),u=n(23),l=n(5),f=n(35),p=n(7);!function(e){e.P400="verifone_P400",e.WISEPOSE="bbpos_wisepos_e"}(t.DeviceType||(t.DeviceType={}));var d=function(e){function t(t,n,r){var o=e.call(this,"terminal/readers",t,r)||this;return o.connectionTokenMgr=n,o}return r(t,e),t.prototype.retrieveReader=function(t){return i(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:return[4,this.connectionTokenMgr.getActiveCredentials()];case 1:return n=r.sent(),this.generatePosRpcSession(n).then(this.handlePosRpcSessionResponse),[2,e.prototype.loadResource.call(this,t,{},n)]}})})},t.prototype.discoverReaders=function(t){return i(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:return[4,this.connectionTokenMgr.getActiveCredentials()];case 1:return n=r.sent(),this.generatePosRpcSession(n).then(this.handlePosRpcSessionResponse),[2,e.prototype.queryResource.call(this,o(o({},t),{limit:100,compatible_sdk_type:"js",compatible_sdk_version:p.PackageUtils.getVersion()}),n)]}})})},t.prototype.generatePosRpcSession=function(e){return i(this,void 0,void 0,function(){return s(this,function(t){return[2,new a.IxStripeClient("terminal",new c.default,new u.NetworkMonitor).postFormEncoded("connection_tokens/generate_pos_rpc_session",f.StringUtils.formEncode(l.getDeviceInfo(),"pos_device_info"),e)]})})},t}(a.default);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBeacon=t.setIntervalAndExecute=void 0;var r=n(10);t.setIntervalAndExecute=function(e,t){return e(),setInterval(e,t)},t.setBeacon=function(e,t,n){var o=!0,i=function(t){return o&&r.timeout(e,t),null};return e().then(function(){return i(t)}).catch(function(){return i(n)}),function(){o=!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringStartsWithPolyfill=t.objectAssignPolyfill=void 0,t.objectAssignPolyfill=function(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null===e||void 0===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!==r&&void 0!==r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},writable:!0,configurable:!0})},t.stringStartsWithPolyfill=function(){String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){var n=t>0?0|t:0;return this.substring(n,n+e.length)===e}})},Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var o=0|t,i=Math.max(o>=0?o:r-Math.abs(o),0);function s(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}for(;i<r;){if(s(n[i],e))return!0;i++}return!1}}),String.prototype.includes||(String.prototype.includes=function(e,t){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),-1!==this.indexOf(e,t)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionStatus=t.PaymentStatus=void 0,function(e){e.NOT_READY="not_ready",e.READY="ready",e.WAITING_FOR_INPUT="waiting_for_input",e.PROCESSING="processing"}(t.PaymentStatus||(t.PaymentStatus={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.NOT_CONNECTED="not_connected"}(t.ConnectionStatus||(t.ConnectionStatus={}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Cancelable=void 0;var i=n(1),s=n(6),a=n(0),c=function(){function e(e){var t=this;this.cancelableOp=e,this.isPending=!0,this.canceled=!1,this.internalPromise=new Promise(function(e,n){t.rejectFn=n;var r=t.cancelableOp.execute(function(){return t.isCanceled()});t.resource=r.resource,r.result.then(function(e){return t.isPending=!1,e},function(e){return t.isPending=!1,Promise.reject(e)}).then(e,n)})}return e.chainCancelable=function(t,n){var i=this,s=t;return new e({execute:function(){return{result:t.result().then(function(e){var t=n(e);return s=t,t.result()})}},onCancel:function(){return r(i,void 0,void 0,function(){return o(this,function(e){return!s.isCanceled()&&s.isPending?[2,s.cancel()]:[2,Promise.resolve()]})})}})},e.prototype.result=function(){return this.internalPromise},e.prototype.cancel=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){if(!this.isPending)throw new s.default({message:"Failed to cancel. Action has already completed."});if(this.canceled)throw new s.default({message:"Action has already been canceled."});return this.canceled=!0,this.rejectFn(new i.default(a.ErrorTemplates.generateError(a.ErrorCodes.CANCELED))),e=null,this.cancelableOp.onCancel&&(e=this.cancelableOp.onCancel(this.resource)),[2,Promise.resolve().then(function(){return e}).then(function(){})]})})},e.prototype.isCanceled=function(){return this.canceled},e}();t.Cancelable=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=n(3),c=n(0),u=function(e){function t(t,n,r){var o=e.call(this,"payment_intents",t,r)||this;return o.connectionTokenMgr=n,o}return r(t,e),t.prototype.getPaymentIntentIdFromClientSecret=function(e){var n=e.match(t.CLIENT_SECRET_REGEX);return a.AssertUtils.assert(!!n,c.ErrorCodes.INVALID_PAYMENT_INTENT_CLIENT_SECRET),n[1]},t.prototype.loadPaymentIntentBySecret=function(t){return o(this,void 0,void 0,function(){var n,r;return i(this,function(o){switch(o.label){case 0:return n=this.getPaymentIntentIdFromClientSecret(t),[4,this.connectionTokenMgr.getActiveCredentials()];case 1:return r=o.sent(),[4,e.prototype.loadResource.call(this,n,{client_secret:t},r)];case 2:return[2,o.sent()]}})})},t.CLIENT_SECRET_REGEX=/^(pi_[^_]+)_secret_[^-]+$/,t}(s.default);t.default=u},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionStatus=void 0;var c=n(50);n(49),window.Promise||(e.Promise=c.Promise);var u=n(4),l=n(48),f=n(3),p=n(30),d=n(16),h=n(46),y=n(29),_=n(28);Object.defineProperty(t,"ConnectionStatus",{enumerable:!0,get:function(){return _.ConnectionStatus}});n(13);var v=n(0),m=n(27);m.objectAssignPolyfill(),m.stringStartsWithPolyfill();var b=new f.ObjectChecker({ip_address:new f.TypeofChecker("string"),serial_number:new f.TypeofChecker("string")}),E=["offline_pin_required","online_or_offline_pin_required","mobile_device_authentication_required"],g=function(){function e(e,t,n,r,o){var i=this;this.discoveryService=e,this.jackRabbitService=t,this.delegate=n,this.paymentIntentClient=r,this.connectionTokenMgr=o,this.collectPaymentMethodAttempt=null,this.collectReusableCardAttempt=null,this.refundInteracCardAttempt=null,this.pendingInteracRefund=null,this.connectionStatus=_.ConnectionStatus.NOT_CONNECTED,this.paymentStatus=_.PaymentStatus.NOT_READY,this.jackRabbitService.setOnUnexpectedDisconnectHandler(function(e){i.setConnectionStatus(_.ConnectionStatus.NOT_CONNECTED),i.delegate.onUnexpectedReaderDisconnect&&i.delegate.onUnexpectedReaderDisconnect(e)})}return e.prototype.getConnectionStatus=function(){return this.connectionStatus},e.prototype.getPaymentStatus=function(){return this.paymentStatus},e.prototype.discoverReaders=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(n){return t=new f.ObjectChecker({device_type:f.NullableType(new f.OneofType(new f.ExactValueType("verifone_P400"),new f.ExactValueType("bbpos_wisepos_e"))),method:f.NullableType(new f.ExactValueType("internet")),location:f.NullableType(new f.TypeofChecker("string")),simulated:f.NullableType(new f.TypeofChecker("boolean"))},!0),f.AssertUtils.checkType(f.NullableType(t),e),[2,this.discoveryService.discoverReaders(e)]})})},e.prototype.connectReader=function(e,t){return void 0===t&&(t={}),s(this,void 0,void 0,function(){var n,r,o;return a(this,function(i){switch(i.label){case 0:return f.AssertUtils.checkType(b,e,v.ErrorCodes.INVALID_READER_SHAPE),e.base_url?(r=e,[3,3]):[3,1];case 1:return[4,this.discoveryService.retrieveReader(e.id)];case 2:r=i.sent(),i.label=3;case 3:return n=r,this.setConnectionStatus(_.ConnectionStatus.CONNECTING),[4,this.jackRabbitService.connect(n,t)];case 4:return o=i.sent(),this.setConnectionStatus(_.ConnectionStatus.CONNECTED),this.setPaymentStatus(_.PaymentStatus.READY),[2,{reader:o.reader}]}})})},e.prototype.getConnectedReader=function(){return this.getConnectionStatus()!==_.ConnectionStatus.CONNECTED?null:this.jackRabbitService.getConnectedReader()},e.prototype.disconnectReader=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.jackRabbitService.disconnect()];case 1:return e.sent(),this.setConnectionStatus(_.ConnectionStatus.NOT_CONNECTED),[2,{}]}})})},e.prototype.clearCachedCredentials=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.disconnectReader()];case 1:return e.sent(),this.connectionTokenMgr.invalidateConnectionToken(),[2,{}]}})})},e.prototype.clearReaderDisplay=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:if(!(null===this||void 0===this?void 0:this.jackRabbitService))throw new h.default("Terminal Object not instantiated!");return[4,this.jackRabbitService.clearReaderDisplay()];case 1:return e.sent(),[2,{}]}})})},e.prototype.setReaderDisplay=function(e){return s(this,void 0,void 0,function(){var t,n,o,i;return a(this,function(s){switch(s.label){case 0:if(!(null===this||void 0===this?void 0:this.jackRabbitService))throw new h.default("Terminal Object not instantiated!");return t=new f.ObjectChecker({description:new f.TypeofChecker("string"),quantity:new f.TypeofChecker("number"),amount:new f.TypeofChecker("number")},!0),n=new f.ObjectChecker({line_items:new f.ArrayChecker(t),tax:f.NullableType(new f.TypeofChecker("number")),total:new f.TypeofChecker("number"),currency:new f.TypeofChecker("string")},!0),o=new f.ObjectChecker({cart:n,type:new f.ExactValueType("cart")},!0),f.AssertUtils.checkType(o,e),this.ensureConnected(),i=r(r({},e.cart),{currency:e.cart.currency.toLowerCase()}),[4,this.jackRabbitService.setReaderDisplay({type:e.type,cart:i})];case 1:return s.sent(),[2,{}]}})})},e.prototype.collectPaymentMethod=function(e,t){return void 0===t&&(t={}),s(this,void 0,void 0,function(){var n,o,i,s,c,u,l,d=this;return a(this,function(a){switch(a.label){case 0:if(f.AssertUtils.checkType(new f.RegexType(p.default.CLIENT_SECRET_REGEX,"PaymentIntent client_secret"),e,v.ErrorCodes.INVALID_PAYMENT_INTENT_CLIENT_SECRET),n=new f.ObjectChecker({options:new f.ArrayChecker(new f.ObjectChecker({amount:new f.TypeofChecker("number"),label:new f.TypeofChecker("string")})),hide_custom_amount:new f.TypeofChecker("boolean")}),o=new f.ObjectChecker({tip_configuration:f.NullableType(n)}),f.AssertUtils.checkType(o,t),this.ensureConnected(),this.paymentStatus!==_.PaymentStatus.READY)return[2,{error:{code:v.ErrorCodes.COMMAND_ALREADY_IN_PROGRESS,message:v.ErrorTemplates.generateErrorMessage(v.ErrorCodes.COMMAND_ALREADY_IN_PROGRESS,{command:"collectPaymentMethod"})}}];i=this.fetchPaymentIntent(e),s=function(e){return d.startCollectingPaymentMethod(e,t)},a.label=1;case 1:return a.trys.push([1,,4,5]),this.collectPaymentMethodAttempt=y.Cancelable.chainCancelable(i,s),this.setPaymentStatus(_.PaymentStatus.WAITING_FOR_INPUT),[4,i.result()];case 2:return c=a.sent(),[4,this.collectPaymentMethodAttempt.result()];case 3:return u=a.sent(),l={sdk_payment_details:u,status:"requires_confirmation"},[2,{paymentIntent:r(r({},c),l)}];case 4:return this.collectPaymentMethodAttempt=null,this.setPaymentStatus(_.PaymentStatus.READY),[7];case 5:return[2]}})})},e.prototype.processPayment=function(e){return s(this,void 0,void 0,function(){var t,n;return a(this,function(r){switch(r.label){case 0:if(t=new f.ObjectChecker({id:new f.RegexType(/^pi_/),sdk_payment_details:new f.TypeofChecker("object")}),f.AssertUtils.checkType(t,e,v.ErrorCodes.INVALID_PAYMENT_INTENT_INPUT_SHAPE),this.ensureConnected(),this.paymentStatus!==_.PaymentStatus.READY)return[2,{error:{code:v.ErrorCodes.COMMAND_ALREADY_IN_PROGRESS,message:v.ErrorTemplates.generateErrorMessage(v.ErrorCodes.COMMAND_ALREADY_IN_PROGRESS,{command:"processPayment"})}}];this.setPaymentStatus(_.PaymentStatus.PROCESSING),r.label=1;case 1:return r.trys.push([1,,4,5]),[4,this.jackRabbitService.confirmPayment({payment_intent_id:e.id,payment_method:e.sdk_payment_details})];case 2:return n=r.sent(),this.isPaymentSoftDeclined(n)?[4,this.retrySoftDecline(n)]:[2,this.resultingChargeToUpdatedPaymentIntent(n)];case 3:return[2,r.sent()];case 4:return this.setPaymentStatus(_.PaymentStatus.READY),this.jackRabbitService.setSimulatorConfig({}),[7];case 5:return[2]}})})},e.prototype.cancelCollectPaymentMethod=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return f.AssertUtils.checkState(null!=this.collectPaymentMethodAttempt,v.ErrorCodes.NO_ACTIVE_COLLECT_PAYMENT_METHOD_ATTEMPT),[4,this.collectPaymentMethodAttempt.cancel()];case 1:return e.sent(),this.setPaymentStatus(_.PaymentStatus.READY),[2,{}]}})})},e.prototype.readReusableCard=function(e){return void 0===e&&(e={}),s(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:if(this.ensureConnected(),this.paymentStatus!==_.PaymentStatus.READY)return[2,{error:{code:v.ErrorCodes.COMMAND_ALREADY_IN_PROGRESS,message:v.ErrorTemplates.generateErrorMessage(v.ErrorCodes.COMMAND_ALREADY_IN_PROGRESS,{command:"readReusableCard"})}}];this.setPaymentStatus(_.PaymentStatus.WAITING_FOR_INPUT),n.label=1;case 1:return n.trys.push([1,,3,4]),this.collectReusableCardAttempt=this.jackRabbitService.readReusableCard(e),[4,this.collectReusableCardAttempt.result()];case 2:return(t=n.sent()).confirm_error?[2,{error:{code:t.confirm_error.code,message:t.confirm_error.message}}]:[2,{payment_method:t.created_reusuable_card}];case 3:return this.setPaymentStatus(_.PaymentStatus.READY),[7];case 4:return[2]}})})},e.prototype.collectRefundPaymentMethod=function(e,t,n,r){return void 0===r&&(r=null),s(this,void 0,void 0,function(){var o;return a(this,function(i){switch(i.label){case 0:f.AssertUtils.checkType(new f.RegexType(/^ch_/),e,v.ErrorCodes.INVALID_CHARGE_ID_INPUT_SHAPE),f.AssertUtils.checkType(new f.TypeofChecker("number"),t),f.AssertUtils.checkType(f.NullableType(new f.ObjectChecker({reverse_transfer:f.NullableType(new f.TypeofChecker("boolean")),refund_application_fee:f.NullableType(new f.TypeofChecker("boolean"))},!0)),r),this.ensureConnected(),this.setPaymentStatus(_.PaymentStatus.WAITING_FOR_INPUT),i.label=1;case 1:return i.trys.push([1,,3,4]),this.refundInteracCardAttempt=this.jackRabbitService.collectInteracRefundMethod({charge_id:e,charge_amount:{charge_amount:t,currency:n}}),[4,this.refundInteracCardAttempt.result()];case 2:return o=i.sent(),this.pendingInteracRefund={charge_id:e,collected_payment_method:o,options:r},[2,{}];case 3:return this.refundInteracCardAttempt=null,this.setPaymentStatus(_.PaymentStatus.READY),[7];case 4:return[2]}})})},e.prototype.processRefund=function(){return s(this,void 0,void 0,function(){var e,t,n,r;return a(this,function(o){switch(o.label){case 0:if(this.ensureConnected(),this.setPaymentStatus(_.PaymentStatus.PROCESSING),!this.pendingInteracRefund)throw new Error("No refund payment method collected. Make sure to call collectRefundPaymentMethod before processing a refund.");o.label=1;case 1:return o.trys.push([1,3,4,5]),e=this.pendingInteracRefund.collected_payment_method,t={interac_payment_method:e,charge_id:this.pendingInteracRefund.charge_id},this.pendingInteracRefund.options&&this.pendingInteracRefund.options.refund_application_fee&&(t.refund_application_fee=this.pendingInteracRefund.options.refund_application_fee),this.pendingInteracRefund.options&&this.pendingInteracRefund.options.reverse_transfer&&(t.reverse_transfer=this.pendingInteracRefund.options.reverse_transfer),[4,this.jackRabbitService.confirmInteracRefund(t)];case 2:return(n=o.sent()).confirm_error?[2,{error:{request_id:n.request_id,code:n.confirm_error.code,message:n.confirm_error.message}}]:n.decline_response?[2,n.decline_response]:n.interac_refund&&"failed"===n.interac_refund.status?[2,{error:{code:v.ErrorCodes.REFUND_FAILED,message:v.ErrorTemplates.generateErrorMessage(v.ErrorCodes.REFUND_FAILED),failure_reason:n.interac_refund.failure_reason}}]:[2,{refund:n.interac_refund}];case 3:return[2,{error:{code:(r=o.sent()).code,message:r.message}}];case 4:return this.setPaymentStatus(_.PaymentStatus.READY),[7];case 5:return[2]}})})},e.prototype.cancelCollectRefundPaymentMethod=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return f.AssertUtils.checkState(null!=this.refundInteracCardAttempt,v.ErrorCodes.NO_ACTIVE_COLLECT_PAYMENT_METHOD_ATTEMPT),[4,this.refundInteracCardAttempt.cancel()];case 1:return e.sent(),this.setPaymentStatus(_.PaymentStatus.READY),this.refundInteracCardAttempt=null,[2,{}]}})})},e.prototype.cancelReadReusableCard=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return f.AssertUtils.checkState(null!=this.collectReusableCardAttempt,v.ErrorCodes.NO_ACTIVE_READ_REUSABLE_CARD_ATTEMPT),[4,this.collectReusableCardAttempt.cancel()];case 1:return e.sent(),[2,{}]}})})},e.prototype.setSimulatorConfiguration=function(e){f.AssertUtils.checkType(new f.ObjectChecker({}),e),this.jackRabbitService.setSimulatorConfig(e)},e.prototype.getSimulatorConfiguration=function(){return this.jackRabbitService.getSimulatorConfig()},e.prototype.fetchPaymentIntent=function(e){var t=this;return new y.Cancelable({execute:function(){return{result:t.paymentIntentClient.loadPaymentIntentBySecret(e)}}})},e.prototype.startCollectingPaymentMethod=function(e,t){var n=this;return void 0===t&&(t={}),new y.Cancelable({execute:function(){var r={charge_amount:e.amount,currency:e.currency,tip_amount:0,cashback_amount:0},o=n.jackRabbitService.collectPaymentMethod({charge_amount:r,tip_configuration:t.tip_configuration});return{result:o.result,resource:o}},onCancel:function(e){return s(n,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,e.cancel()];case 1:return t.sent(),[2]}})})}})},e.prototype.resultingChargeToUpdatedPaymentIntent=function(e){return e.confirmed_payment_intent?(u.default.count("Terminal","ConfirmResult","ChargeApprove","OK"),{paymentIntent:e.confirmed_payment_intent}):e.decline_response?(u.default.count("Terminal","ConfirmResult","ChargeDecline","ERROR",e.decline_response.error.code||"unknown_decline_error"),e.decline_response):(u.default.count("Terminal","ConfirmResult","ConfirmError","ERROR",e.confirm_error.code),{error:{code:e.confirm_error.code,message:e.confirm_error.message,payment_intent:null}})},e.prototype.ensureConnected=function(){var e=this.getConnectionStatus();f.AssertUtils.checkState(e===_.ConnectionStatus.CONNECTED,v.ErrorCodes.NO_ESTABLISHED_CONNECTION)},e.prototype.setPaymentStatus=function(e){this.paymentStatus=e,this.delegate.onPaymentStatusChange&&this.delegate.onPaymentStatusChange({status:e})},e.prototype.setConnectionStatus=function(e){e===_.ConnectionStatus.NOT_CONNECTED&&this.setPaymentStatus(_.PaymentStatus.NOT_READY),this.connectionStatus=e,this.delegate.onConnectionStatusChange&&this.delegate.onConnectionStatusChange({status:this.connectionStatus})},e.prototype.overrideBaseURL=function(e){},e.prototype.isPaymentSoftDeclined=function(e){return e.decline_response&&E.includes(e.decline_response.error.code)},e.prototype.retrySoftDecline=function(e){return s(this,void 0,void 0,function(){var t,n,r,o,i;return a(this,function(s){switch(s.label){case 0:t=e,s.label=1;case 1:return this.isPaymentSoftDeclined(t)?(n=e.decline_response.error.payment_intent,this.setPaymentStatus(_.PaymentStatus.READY),[4,this.resumeCollectPaymentMethod(n)]):[3,4];case 2:return r=s.sent(),o=r.paymentIntent,(i=r.error)?(this.setPaymentStatus(_.PaymentStatus.READY),[2,{error:i}]):(this.setPaymentStatus(_.PaymentStatus.PROCESSING),[4,this.jackRabbitService.confirmPayment({payment_intent_id:o.id,payment_method:o.sdk_payment_details})]);case 3:return t=s.sent(),[3,1];case 4:return[2,this.resultingChargeToUpdatedPaymentIntent(t)]}})})},e.prototype.resumeCollectPaymentMethod=function(e){return s(this,void 0,void 0,function(){var t,n,o,i,s,c=this;return a(this,function(a){switch(a.label){case 0:if(this.ensureConnected(),this.paymentStatus!==_.PaymentStatus.READY)return[2,{error:{code:v.ErrorCodes.COMMAND_ALREADY_IN_PROGRESS,message:v.ErrorTemplates.generateErrorMessage(v.ErrorCodes.COMMAND_ALREADY_IN_PROGRESS,{command:"resumeCollectPaymentMethod"})},paymentIntent:void 0}];t=new y.Cancelable({execute:function(){return{result:Promise.resolve(e)}}}),n=function(e){return c.startResumingCollectPaymentMethod(e)},a.label=1;case 1:return a.trys.push([1,,4,5]),this.collectPaymentMethodAttempt=y.Cancelable.chainCancelable(t,n),this.setPaymentStatus(_.PaymentStatus.WAITING_FOR_INPUT),[4,t.result()];case 2:return o=a.sent(),[4,this.collectPaymentMethodAttempt.result()];case 3:return i=a.sent(),s={sdk_payment_details:i,status:"requires_confirmation"},[2,{paymentIntent:r(r({},o),s),error:void 0}];case 4:return this.collectPaymentMethodAttempt=null,this.setPaymentStatus(_.PaymentStatus.READY),[7];case 5:return[2]}})})},e.prototype.startResumingCollectPaymentMethod=function(e){var t=this;return new y.Cancelable({execute:function(){var n=t.jackRabbitService.resumeCollectPaymentMethod(e.id);return{result:n.result,resource:n}},onCancel:function(e){e.cancel()}})},o([l.default({recordReqRespOnErrorOnly:!0}),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],e.prototype,"discoverReaders",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"connectReader",null),o([l.default(),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",Object)],e.prototype,"getConnectedReader",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",Promise)],e.prototype,"disconnectReader",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",Promise)],e.prototype,"clearCachedCredentials",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",Promise)],e.prototype,"clearReaderDisplay",null),o([l.default({recordReqRespOnErrorOnly:!0}),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],e.prototype,"setReaderDisplay",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[String,Object]),i("design:returntype",Promise)],e.prototype,"collectPaymentMethod",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],e.prototype,"processPayment",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",Promise)],e.prototype,"cancelCollectPaymentMethod",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],e.prototype,"readReusableCard",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[String,Number,String,Object]),i("design:returntype",Promise)],e.prototype,"collectRefundPaymentMethod",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",Promise)],e.prototype,"processRefund",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",Promise)],e.prototype,"cancelCollectRefundPaymentMethod",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",Promise)],e.prototype,"cancelReadReusableCard",null),o([l.default(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"setSimulatorConfiguration",null),o([l.default(),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"getSimulatorConfiguration",null),o([l.default(),d.WithApplicationErrorsLiftedToTry,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],e.prototype,"resumeCollectPaymentMethod",null),e}();t.default=g}).call(this,n(31))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.isRpcUnauthenticatedError=t.isRetriableRpcNetworkError=t.RpcErrorType=void 0;var o,i=n(1),s=n(0);!function(e){e[e.RPC=0]="RPC",e[e.APPLICATION=1]="APPLICATION"}(o=t.RpcErrorType||(t.RpcErrorType={})),t.isRetriableRpcNetworkError=function(e){return"SERVER_UNREACHABLE"===e||"SERVER_UNRESOLVABLE"===e||"RETRY"===e||"SERVER_BUSY"===e||"TIMEOUT"===e||"NETWORK_UNAVAILABLE"===e},t.isRpcUnauthenticatedError=function(e){return"AUTHENTICATION_FAILURE"===e||"UNAUTHORIZED"===e||"INVALID_SESSION_TOKEN"===e};var a=function(e){function t(n){var r=e.call(this,s.ErrorTemplates.generateError(s.ErrorCodes.RPC_ERROR,{msg:n.error}))||this;return r.response=n,Object.setPrototypeOf(r,t.prototype),r}return r(t,e),t.prototype.errorType=function(){return"OK"!==this.applicationEc()?o.APPLICATION:o.RPC},t.prototype.rpcEc=function(){return this.response.rpc_error_code||"RPC_EC_INVALID"},t.prototype.applicationEc=function(){return this.response.app_error_code||"APPLICATION_EC_INVALID"},t}(i.default);t.default=a},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,f=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&d())}function d(){if(!l){var e=a(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtils=void 0;var r=function(){function e(){}return e.sanitizeNonAsciiToDashes=function(e){return encodeURIComponent(e).replace(/%[0-9A-Fa-f]{2}/g,"-")},e.sanitizePageTitle=function(t){var n=e.sanitizeNonAsciiToDashes(t);return n.match(/^[-]+$/)?null:n},e.formEncode=function(t,n){return void 0===n&&(n=null),Object.keys(t).map(function(r){return"object"==typeof t[r]?e.formEncode(t[r],null===n?r:n+"["+r+"]"):null===n?r+"="+t[r].toString():n+"["+r+"]="+t[r].toString()}).join("&")},e}();t.StringUtils=r,t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_GATOR_ENDPOINT=void 0;var o=n(17);t.DEFAULT_GATOR_ENDPOINT={url_path:"https://gator.stripe.com",port:443};var i=function(e){function n(n,r,o){return void 0===o&&(o=t.DEFAULT_GATOR_ENDPOINT),e.call(this,"GatorService",n,o,r)||this}return r(n,e),n.prototype.reportEvent=function(e){return this.rpc("reportEvent",e,this.sessionToken)},n.prototype.reportTrace=function(e){return this.rpc("reportTrace",e,this.sessionToken)},n}(o.default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SIMULATED_READER_URL=t.rabbitErrorMapper=t.rpcEndpointFromReader=void 0;var s=n(2),a=n(4),c=n(33),u=n(3),l=n(7),f=n(21),p=n(12),d=n(0),h=n(20),y=n(5),_=n(15),v=4443,m="device.stripe-terminal-local-reader.net";function b(e,t){return t.id===p.SIMULATED_ID?{simulator:!0,url_path:e,port:null}:{url_path:"https://"+t.ip_address.replace(/\./g,"-")+"."+(t.base_url||m),port:v}}function E(e){return e instanceof c.default?"NETWORK_UNAVAILABLE"===e.rpcEc()?new _.default(d.ErrorTemplates.generateErrorMessage(d.ErrorCodes.READER_CONNECTION_ERROR,{rpcEndpoint:null})):new _.default(e.error.message):(a.default.count("JackRabbitConnectionMgr","UnexpectedNonRpcError",e.toString(),"ERROR"),new _.default(e.toString()))}t.rpcEndpointFromReader=b,t.rabbitErrorMapper=E,t.SIMULATED_READER_URL="https://terminal-simulator.stripe.com";var g=function(){function e(e,n,r,o,i,s){void 0===i&&(i=t.SIMULATED_READER_URL),void 0===s&&(s=6e4),this.deviceFingerprint=e,this.connectionTokenMgr=n,this.jackRabbitRpcServiceFactory=r,this.gatorRpcService=o,this.simulatorBaseUrl=i,this.heartbeatIntervalMs=s,this.sessionToken=null,this.jackRabbitRpcClient=null,this.synchronizer=new f.Synchronizer,this.preConnectionReader=null,this.activeConnection=null,this.onUnexpectedDisconnectHandler=function(){}}return e.prototype.setOnUnexpectedDisconnectHandler=function(e){this.onUnexpectedDisconnectHandler=e},e.prototype.connect=function(e,t){return o(this,void 0,void 0,function(){var n,r,o,s,c,f,p,v=this;return i(this,function(i){switch(i.label){case 0:u.AssertUtils.assert(!this.activeConnection,d.ErrorCodes.ALREADY_CONNECTED),this.preConnectionReader=e,n=b(this.simulatorBaseUrl,this.preConnectionReader),r=this.jackRabbitRpcServiceFactory(n),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this.connectionTokenMgr.getActiveCredentials()];case 2:return o=i.sent(),[4,this.activateTerminal(o,r,t)];case 3:if(s=i.sent(),c=h.tryOrDefault(function(){return s.version.client_version},"0.0.0.0"),f=h.tryOrDefault(function(){return s.version.client_type},"RACCOON"),!y.isVersionCompatible(l.PackageUtils.getProjectConfig().minRabbitVersion[f],c))throw new _.default(d.ErrorTemplates.generateErrorMessage(d.ErrorCodes.INVALID_READER_VERSION));return a.default.count("JackRabbitConnectionMgr","ReaderVersion",c,"OK"),a.default.count("JackRabbitConnectionMgr","ReaderType",h.tryOrDefault(function(){return s.version.client_type},"Unknown"),"OK"),this.sessionToken=s.session_token,this.gatorRpcService&&s.sdk_rpc_session&&(this.gatorRpcService.sessionToken=s.sdk_rpc_session),this.jackRabbitRpcClient=r,this.activeConnection={posId:this.deviceFingerprint,reader:this.preConnectionReader,sdkRpcSession:s.sdk_rpc_session,heartbeatIntervalId:setInterval(function(){return v.terminalHeartbeat()},this.heartbeatIntervalMs)},[2,this.activeConnection];case 4:throw p=i.sent(),this.clearSession(),p;case 5:return[2]}})})},e.prototype.getActiveConnection=function(){return this.activeConnection},e.prototype.disconnect=function(){return this.clearSession(),Promise.resolve({})},e.prototype.rabbitCallAuthenticated=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return u.AssertUtils.assert(null!=this.jackRabbitRpcClient&&null!=this.sessionToken,d.ErrorCodes.NO_ESTABLISHED_CONNECTION),[2,this.rabbitCall(this.jackRabbitRpcClient,e,this.sessionToken)]})})},e.prototype.rabbitCall=function(e,t,n){return o(this,void 0,void 0,function(){var r,s=this;return i(this,function(a){return r=function(){return o(s,void 0,void 0,function(){var r;return i(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),e.setSimulatorConfig(this.simulatorConfiguration),[4,t(e,n)];case 1:return[2,o.sent()];case 2:throw r=o.sent(),this.handleErrors(r),E(r);case 3:return[2]}})})},[2,this.synchronizer.synchronize(r)]})})},e.prototype.clearSession=function(){this.activeConnection&&clearInterval(this.activeConnection.heartbeatIntervalId),this.activeConnection=null,this.connectionTokenMgr.invalidateConnectionToken(),this.sessionToken=null,this.jackRabbitRpcClient=null},e.prototype.handleErrors=function(e){if(e instanceof c.default){var t=e.errorType()===c.RpcErrorType.RPC&&c.isRetriableRpcNetworkError(e.rpcEc()),n=e.errorType()===c.RpcErrorType.APPLICATION&&c.isRpcUnauthenticatedError(e.applicationEc()),r=!window.navigator.onLine;if(n&&s.default.error(d.ErrorTemplates.generateErrorMessage(d.ErrorCodes.AUTHENTICATION_ERROR)),t)if(r)s.default.error(d.ErrorTemplates.generateErrorMessage(d.ErrorCodes.INTERNET_CONNECTION_UNAVAILABLE));else if(this.activeConnection||this.preConnectionReader){var o=b(this.simulatorBaseUrl,this.activeConnection?this.activeConnection.reader:this.preConnectionReader);s.default.error(d.ErrorTemplates.generateErrorMessage(d.ErrorCodes.READER_CONNECTION_ERROR,{rpcEndpoint:o}))}else s.default.error(d.ErrorTemplates.generateErrorMessage(d.ErrorCodes.READER_CONNECTION_ERROR,{rpcEndpoint:null}));if(n||t){var i=!!this.activeConnection;this.clearSession(),i&&this.onUnexpectedDisconnectHandler({error:{message:e.error.message}})}}},e.prototype.terminalHeartbeat=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.rabbitCallAuthenticated(function(e,t){return e.terminalHeartbeat({},t)})]})})},e.prototype.activateTerminal=function(e,t,n){return o(this,void 0,void 0,function(){var o,s=this;return i(this,function(i){return o=r(r({},n),{pos_activation_token:e,store_name:"empty",pos_device_id:this.deviceFingerprint,pos_software_info:{pos_type:l.PackageUtils.getProjectName(),sdk_version:l.PackageUtils.getVersion()}}),[2,this.rabbitCall(t,function(){return t.activateTerminal(o,s.sessionToken)})]})})},e.prototype.setSessionTokenEarlierThanActivate=function(e){this.sessionToken||(this.sessionToken=e)},e}();t.default=g},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(20),a=n(10),c=n(29),u=n(0),l=n(15),f=function(){function e(e,t,n){void 0===t&&(t=400),void 0===n&&(n=!0),this.connectionMgr=e,this.querySettleIntervalMs=t,this.allowCustomerCancel=n}return e.hasPaymentMethod=function(e){return null!=e.payment_method},e.hasReusableCard=function(e){return null!=e.reusable_card_method},e.hasUserCancelledCollectPayment=function(e){return s.tryOrDefault(function(){return"PAYMENT_CANCELED"===e.payment_status},!1)},e.prototype.setSimulatorConfig=function(e){this.connectionMgr.simulatorConfiguration=e},e.prototype.getSimulatorConfig=function(){return this.connectionMgr.simulatorConfiguration},e.prototype.setOnUnexpectedDisconnectHandler=function(e){this.connectionMgr.setOnUnexpectedDisconnectHandler(e)},e.prototype.connect=function(e,t){return this.connectionMgr.connect(e,t)},e.prototype.getConnectedReader=function(){var e=this.connectionMgr.getActiveConnection();return e?e.reader:null},e.prototype.disconnect=function(){return this.connectionMgr.getActiveConnection()&&this.clearReaderDisplay(),this.connectionMgr.disconnect()},e.prototype.setReaderDisplay=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){return t=r(r({},e),{transaction_context:this.transactionContext}),[2,this.connectionMgr.rabbitCallAuthenticated(function(e,n){return e.setReaderDisplay(t,n)})]})})},e.prototype.clearReaderDisplay=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return e={transaction_context:this.transactionContext},[4,this.connectionMgr.rabbitCallAuthenticated(function(t,n){return t.clearReaderDisplay(e,n)})];case 1:return[2,t.sent()]}})})},e.prototype.collectPaymentMethod=function(e){return this.collectAndQueryUntilPaymentMethod(e)},e.prototype.resumeCollectPaymentMethod=function(e){return this.resumeCollectAndQueryUntilPaymentMethod(e)},e.prototype.confirmPayment=function(e){var t=r(r({},e),{transaction_context:this.transactionContext});return this.connectionMgr.rabbitCallAuthenticated(function(e,n){return e.confirmPayment(t,n)}).then(function(e){return e},function(e){return Promise.reject(e)})},e.prototype.collectInteracRefundMethod=function(t){var n=this;return new c.Cancelable({execute:function(s){return{result:o(n,void 0,void 0,function(){var n;return i(this,function(o){switch(o.label){case 0:return[4,this.connectionMgr.rabbitCallAuthenticated(function(e,n){return e.collectInteracRefundMethod(r({},t),n)})];case 1:o.sent(),n={},o.label=2;case 2:return e.hasPaymentMethod(n)?[3,5]:[4,a.sleep(this.querySettleIntervalMs)];case 3:if(o.sent(),s())throw new l.default(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.CANCELED));if(n.num_of_canceled_payments&&n.num_of_canceled_payments>0&&this.allowCustomerCancel)throw this.connectionMgr.rabbitCallAuthenticated(function(e,t){return e.cancelCollectInteracRefundMethod({},t)}),new l.default(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.CANCELED_BY_CUSTOMER));return[4,this.connectionMgr.rabbitCallAuthenticated(function(e,t){return e.queryInteracRefundMethod({},t)})];case 4:return n=o.sent(),[3,2];case 5:return[2,n.payment_method]}})})}},onCancel:function(){n.connectionMgr.rabbitCallAuthenticated(function(e,t){return e.cancelCollectInteracRefundMethod({},t)})}})},e.prototype.confirmInteracRefund=function(e){return this.connectionMgr.rabbitCallAuthenticated(function(t,n){return t.confirmInteracRefund(r({},e),n)})},e.prototype.readReusableCard=function(t){var n=this,r=new c.Cancelable({execute:function(r){return{result:o(n,void 0,void 0,function(){var n;return i(this,function(o){switch(o.label){case 0:return[4,this.connectionMgr.rabbitCallAuthenticated(function(e,n){return e.collectReusableCard(t,n)})];case 1:o.sent(),n={},o.label=2;case 2:return e.hasReusableCard(n)?[3,5]:[4,a.sleep(this.querySettleIntervalMs)];case 3:if(o.sent(),r())throw new l.default(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.CANCELED));if("REUSABLE_CARD_CANCELED"===n.reusable_card_status)throw new l.default(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.CANCELED_BY_CUSTOMER));if(n.num_of_canceled_payments&&n.num_of_canceled_payments>0&&this.allowCustomerCancel)throw this.connectionMgr.rabbitCallAuthenticated(function(e,t){return e.cancelCollectReusableCard({},t)}),new l.default(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.CANCELED_BY_CUSTOMER));return[4,this.connectionMgr.rabbitCallAuthenticated(function(e,t){return e.queryCollectReusableCard({},t)})];case 4:return n=o.sent(),[3,2];case 5:return[2,n.reusable_card_method]}})})}},onCancel:function(){n.connectionMgr.rabbitCallAuthenticated(function(e,t){return e.cancelCollectReusableCard({},t)})}});return c.Cancelable.chainCancelable(r,function(e){return new c.Cancelable({execute:function(){return{result:n.connectionMgr.rabbitCallAuthenticated(function(t,n){return t.confirmReusableCard({reusable_card_method:e},n)})}}})})},e.prototype.cancelCollectPaymentMethod=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.connectionMgr.rabbitCallAuthenticated(function(e,t){return e.cancelCollectPaymentMethod({},t)})]})})},e.prototype.collectAndQueryUntilPaymentMethod=function(t){var n=this,s=!1,c=this.transactionContext,f=r(r({},t),{transaction_context:c});return{result:o(n,void 0,void 0,function(){var n,r;return i(this,function(o){switch(o.label){case 0:return[4,this.connectionMgr.rabbitCallAuthenticated(function(e,t){return e.collectPaymentMethod(f,t)})];case 1:return o.sent(),n={transaction_context:c},[4,this.queryPaymentMethod(n)];case 2:r=o.sent(),o.label=3;case 3:return e.hasPaymentMethod(r)?[3,6]:[4,a.sleep(this.querySettleIntervalMs)];case 4:if(o.sent(),s)throw new l.default(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.CANCELED));if(e.hasUserCancelledCollectPayment(r))throw new l.default(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.CANCELED_BY_CUSTOMER));if(r.num_of_canceled_payments&&r.num_of_canceled_payments>0&&this.allowCustomerCancel)throw this.cancelCollectPaymentMethod(),new l.default(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.CANCELED_BY_CUSTOMER));return[4,this.queryPaymentMethod(t)];case 5:return r=o.sent(),[3,3];case 6:return[2,r.payment_method]}})}),cancel:function(){return s=!0,n.cancelCollectPaymentMethod()}}},e.prototype.resumeCollectAndQueryUntilPaymentMethod=function(t){var n=this,r=!1,s=this.transactionContext;return{result:o(n,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return[4,this.connectionMgr.rabbitCallAuthenticated(function(e,n){return e.resumeCollectPaymentMethod({payment_intent_id:t},n)})];case 1:return i.sent(),n={transaction_context:s},[4,this.queryPaymentMethod(n)];case 2:o=i.sent(),i.label=3;case 3:return e.hasPaymentMethod(o)?[3,6]:[4,a.sleep(this.querySettleIntervalMs)];case 4:if(i.sent(),r)throw new l.default(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.CANCELED));if(e.hasUserCancelledCollectPayment(o))throw new l.default(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.CANCELED_BY_CUSTOMER));if(o.num_of_canceled_payments&&o.num_of_canceled_payments>0&&this.allowCustomerCancel)throw this.cancelCollectPaymentMethod(),new l.default(u.ErrorTemplates.generateErrorMessage(u.ErrorCodes.CANCELED_BY_CUSTOMER));return[4,this.queryPaymentMethod(n)];case 5:return o=i.sent(),[3,3];case 6:return[2,o.payment_method]}})}),cancel:function(){return o(n,void 0,void 0,function(){return i(this,function(e){return r=!0,[2,this.cancelCollectPaymentMethod()]})})}}},e.prototype.queryPaymentMethod=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return[2,this.connectionMgr.rabbitCallAuthenticated(function(t,n){return t.queryPaymentMethod(e,n)})]})})},e}();t.default=f},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.synchronizer=new o.Synchronizer,t}return r(t,e),t.prototype.rpc=function(t,n,r,o){var i=this;return this.synchronizer.synchronize(function(){return e.prototype.rpc.call(i,t,n,r,o)})},t}(n(17).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n,r){return e.call(this,"JackRabbitService",t,r,n)||this}return r(t,e),t.prototype.getUntracedMethods=function(){return["queryPaymentMethod","queryCollectSource"]},t.prototype.activateTerminal=function(e,t){return this.rpc("activateTerminal",e,t,{isRetriable:!1})},t.prototype.terminalHeartbeat=function(e,t){return this.rpc("terminalHeartbeat",e,t)},t.prototype.setReaderDisplay=function(e,t){return this.rpc("setReaderDisplay",e,t)},t.prototype.clearReaderDisplay=function(e,t){return this.rpc("clearReaderDisplay",e,t)},t.prototype.collectPaymentMethod=function(e,t){return this.rpc("collectPaymentMethod",e,t)},t.prototype.queryPaymentMethod=function(e,t){return this.rpc("queryPaymentMethod",e,t)},t.prototype.confirmPayment=function(e,t){return this.rpc("confirmPayment",e,t)},t.prototype.resumeCollectPaymentMethod=function(e,t){return this.rpc("resumeCollectPaymentMethod",e,t)},t.prototype.cancelCollectPaymentMethod=function(e,t){return this.rpc("cancelCollectPaymentMethod",e,t)},t.prototype.collectReusableCard=function(e,t){return this.rpc("collectReusableCard",e,t)},t.prototype.queryCollectReusableCard=function(e,t){return this.rpc("queryCollectReusableCard",e,t)},t.prototype.confirmReusableCard=function(e,t){return this.rpc("confirmReusableCard",e,t)},t.prototype.cancelCollectReusableCard=function(e,t){return this.rpc("cancelCollectReusableCard",e,t)},t.prototype.collectInteracRefundMethod=function(e,t){return this.rpc("collectInteracRefundMethod",e,t)},t.prototype.queryInteracRefundMethod=function(e,t){return this.rpc("queryInteracRefundMethod",e,t)},t.prototype.confirmInteracRefund=function(e,t){return this.rpc("confirmInteracRefund",e,t)},t.prototype.cancelCollectInteracRefundMethod=function(e,t){return this.rpc("cancelCollectInteracRefundMethod",e,t)},t}(n(39).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.GatorTraceCollector=t.mapTraceToTracePb=t.mapTracePointToTracePointPb=t.mapLogToLogPoint=t.mapLogLevelToNumber=t.mapMeterEventToMeterPoint=void 0;var o=n(9),i=n(22),s=n(7);n(11);var a=n(8);function c(e){return{event_name:e.event,elapsed_ms:e.duration}}function u(e){var t;return((t={})[o.LogLevel.DEBUG]=0,t[o.LogLevel.INFO]=1,t[o.LogLevel.WARN]=2,t[o.LogLevel.ERROR]=3,t)[e]}function l(e){return{log_level:u(e.log_level),tag:e.tag,message:"text"===e.type?e.message:void 0,exception:"exception"===e.type?e.exception:void 0}}function f(e){return{time_offset_ms:e.time_offset_ms,log_point:"log"===e.type?l(e.log):void 0,meter_point:"meter"===e.type?c(e.meter):void 0}}function p(e){return{action_id:(e.parent_trace_id?e.parent_trace_id+a.default.TRACE_ID_SEPARATOR:"")+e.id,request_info:{user_agent:navigator.userAgent},start_time_ms:e.start_time_ms,total_time_ms:e.total_time_ms,service:e.service,method:e.method,request:e.request||JSON.stringify({}),response:e.response||JSON.stringify({}),exception:"exception"===e.type?e.exception:void 0,version_info:e.version_info,traces:e.trace_points.map(function(e){return f(e)})}}t.mapMeterEventToMeterPoint=c,t.mapLogLevelToNumber=u,t.mapLogToLogPoint=l,t.mapTracePointToTracePointPb=f,t.mapTraceToTracePb=p;var d=function(e){function t(t,n,r){void 0===r&&(r=9e4);var o=e.call(this,r)||this;return o.posDeviceId=t,o.gator=n,o}return r(t,e),t.prototype.doFlush=function(e){var t=this,n=e.map(function(e){return p(e)}).map(function(e){return{origin_role:s.PackageUtils.getProjectName(),origin_id:t.posDeviceId,trace:e}});return this.gator.reportTrace({proxy_traces:n})},t}(i.PeriodicFlusher);t.GatorTraceCollector=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.GatorEventCollector=t.mapEventToEventResultPb=void 0;var o=n(22),i=n(7);function s(e){return{domain:e.domain,scope:e.scope,event:e.event,result:"OK"===e.result?"OK":"ERROR",outcome:e.error_code,duration:"meter"===e.type?e.duration:void 0,measurement:"gauge"===e.type?e.measurement:void 0}}t.mapEventToEventResultPb=s;var a=function(e){function t(t,n,r){var o=e.call(this,r)||this;return o.posDeviceId=t,o.gator=n,o}return r(t,e),t.prototype.doFlush=function(e){var t=this,n=e.map(function(e){return{origin_role:i.PackageUtils.getProjectName(),origin_id:t.posDeviceId,event:s(e)}});return this.gator.reportEvent({proxy_events:n})},t}(o.PeriodicFlusher);t.GatorEventCollector=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.collect=function(e){console.log(e)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeveloperFriendlyLogCollector=void 0;var r=n(9);n(11);var o=function(){function e(e){void 0===e&&(e=console),this.stdOut=e}return e.prototype.collect=function(e){e.log_level!==r.LogLevel.WARN&&e.log_level!==r.LogLevel.ERROR||this.stdOut.warn(e.message||e.exception)},e}();t.DeveloperFriendlyLogCollector=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.TerminalFactory=void 0,n(27);var r=n(44),o=n(43),i=n(42),s=n(41),a=n(2),c=n(4),u=n(8),l=n(24),f=n(3),p=n(5),d=n(12),h=n(40),y=n(38),_=n(37),v=n(30),m=n(25),b=n(32),E=n(19),g=n(36),T=n(23),C=n(18),R=n(0),w=function(){function e(){}return e.create=function(e){f.AssertUtils.checkUserGivenArg("function"==typeof e.onFetchConnectionToken,R.ErrorCodes.INVALID_ON_FETCH_CONNECTION_TOKEN),f.AssertUtils.checkUserGivenArg("function"==typeof e.onUnexpectedReaderDisconnect,R.ErrorCodes.INVALID_ON_UNEXPECTED_READER_DISCONNECT),f.AssertUtils.checkUserGivenArg(!e.onConnectionStatusChange||"function"==typeof e.onConnectionStatusChange,R.ErrorCodes.INVALID_ON_CONNECTION_STATUS_CHANGE),f.AssertUtils.checkUserGivenArg(!e.onPaymentStatusChange||"function"==typeof e.onPaymentStatusChange,R.ErrorCodes.INVALID_ON_PAYMENT_STATUS_CHANGE);var t=new l.default,n=p.getDeviceInfo(),w=new T.NetworkMonitor,O=[u.default];O.push(new r.DeveloperFriendlyLogCollector);var A=[],P=[c.default];if(e.logLevel===E.OutputLogLevel.VERBOSE){var N=new o.default;O.push(N),A.push(N),P.push(N),console.log("Stripe Terminal: Pos Device ID is "+n.device_uuid+". Please send this when requesting assistance from support for fastest help. Happy Coding :)")}var S=null;S=new g.default(t,w);var I=new i.GatorEventCollector(n.device_uuid,S);I.start(),A.push(I);var D=new s.GatorTraceCollector(n.device_uuid,S);D.start(),P.push(D),a.default.setCollectors(O),c.default.setCollectors(A),u.default.setCollectors(P);var M=new C.default(e.onFetchConnectionToken,w),k=new m.default(t,M,w),L=new d.DiscoveryMethodFactory(k),j=new d.default(L),x=new l.default(2e4),U=new _.default(n.device_uuid,M,function(e){return new h.default(x,w,e)},S,e.simulatorBaseUrl),F=new y.default(U,void 0,e.readerBehavior&&e.readerBehavior.allowCustomerCancel),B=new v.default(t,M,w);return k.handlePosRpcSessionResponse=function(e){U.setSessionTokenEarlierThanActivate(e.sdk_rpc_session_token),S&&(S.sessionToken=e.sdk_rpc_session_token)},new b.default(j,F,e,B,M)},e}();t.TerminalFactory=w,t.create=function(e){return w.create(e)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=function(e){function t(t){var n=e.call(this,{message:t})||this;return n.message=t,Object.setPrototypeOf(n,o.default.prototype),n}return r(t,e),t}(o.default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n,r,o){var i=e.call(this,{message:n,request_id:r,code:o})||this;return Object.setPrototypeOf(i,t.prototype),i}return r(t,e),t.fromHttpError=function(e){var n={message:e.error.message,code:e.error.code};try{n=JSON.parse(e.responseBodyText).error}catch(e){}var r=e.response.headers?e.response.headers.get("request-id"):"";return new t(n.message,r,n.code)},t}(n(1).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(8);t.default=function(e){return function(t,n,i){var s=i.value;return r(r({},i),{value:o.default.traceFn(s,t.constructor.name,n,e)})}}},function(e,t,n){"use strict";n.r(t);
/*! (c) Andrea Giammarchi - ISC */
var r={};try{!function(e,t){if("+"!==new e("q=%2B").get("q")||"+"!==new e({q:"+"}).get("q")||"+"!==new e([["q","+"]]).get("q")||"q=%0A"!==new e("q=\n").toString()||"q=+%26"!==new e({q:" &"}).toString()||"q=%25zx"!==new e({q:"%zx"}).toString())throw e;r.URLSearchParams=e}(URLSearchParams)}catch(e){!function(e,t,n){var o=e.create,i=e.defineProperty,s=/[!'\(\)~]|%20|%00/g,a=/%(?![0-9a-fA-F]{2})/g,c=/\+/g,u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},l={append:function(e,t){h(this._ungap,e,t)},delete:function(e){delete this._ungap[e]},get:function(e){return this.has(e)?this._ungap[e][0]:null},getAll:function(e){return this.has(e)?this._ungap[e].slice(0):[]},has:function(e){return e in this._ungap},set:function(e,n){this._ungap[e]=[t(n)]},forEach:function(e,n){var r=this;for(var o in r._ungap)r._ungap[o].forEach(i,o);function i(i){e.call(n,i,t(o),r)}},toJSON:function(){return{}},toString:function(){var e=[];for(var t in this._ungap)for(var n=_(t),r=0,o=this._ungap[t];r<o.length;r++)e.push(n+"="+_(o[r]));return e.join("&")}};for(var f in l)i(p.prototype,f,{configurable:!0,writable:!0,value:l[f]});function p(e){var t=o(null);switch(i(this,"_ungap",{value:t}),!0){case!e:break;case"string"==typeof e:"?"===e.charAt(0)&&(e=e.slice(1));for(var r=e.split("&"),s=0,a=r.length;s<a;s++){var c=(u=r[s]).indexOf("=");-1<c?h(t,y(u.slice(0,c)),y(u.slice(c+1))):u.length&&h(t,y(u),"")}break;case n(e):for(s=0,a=e.length;s<a;s++){var u;h(t,(u=e[s])[0],u[1])}break;case"forEach"in e:e.forEach(d,t);break;default:for(var l in e)h(t,l,e[l])}}function d(e,t){h(this,t,e)}function h(e,t,r){var o=n(r)?r.join(","):r;t in e?e[t].push(o):e[t]=[o]}function y(e){return decodeURIComponent(e.replace(a,"%25").replace(c," "))}function _(e){return encodeURIComponent(e).replace(s,v)}function v(e){return u[e]}r.URLSearchParams=p}(Object,String,Array.isArray)}!function(e){var t=!1;try{t=!!Symbol.iterator}catch(e){}function n(e,n){var r=[];return e.forEach(n,r),t?r[Symbol.iterator]():{next:function(){var e=r.shift();return{done:void 0===e,value:e}}}}"forEach"in e||(e.forEach=function(e,t){var n=this,r=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(o){!o.length||o in r||(r[o]=n.getAll(o)).forEach(function(r){e.call(t,r,o,n)})})}),"keys"in e||(e.keys=function(){return n(this,function(e,t){this.push(t)})}),"values"in e||(e.values=function(){return n(this,function(e,t){this.push(e)})}),"entries"in e||(e.entries=function(){return n(this,function(e,t){this.push([t,e])})}),!t||Symbol.iterator in e||(e[Symbol.iterator]=e.entries),"sort"in e||(e.sort=function(){for(var e,t,n,r=this.entries(),o=r.next(),i=o.done,s=[],a=Object.create(null);!i;)t=(n=o.value)[0],s.push(t),t in a||(a[t]=[]),a[t].push(n[1]),i=(o=r.next()).done;for(s.sort(),e=0;e<s.length;e++)this.delete(s[e]);for(e=0;e<s.length;e++)t=s[e],this.append(t,a[t].shift())}),function(t){var n=t.defineProperty,r=t.getOwnPropertyDescriptor,o=function(t){var n=t.append;t.append=e.append,URLSearchParams.call(t,t._usp.search.slice(1)),t.append=n},i=function(e,t){if(!(e instanceof t))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+t.name)},s=function(s){var a,c=s.prototype,u=r(c,"searchParams"),l=r(c,"href"),f=r(c,"search");!u&&f&&f.set&&(a=function(e){return function(t,r){return n(t,"_searchParams",{configurable:!0,writable:!0,value:e(r,t)}),r}}(function(t){function r(n,r){e.append.call(this,n,r),n=this.toString(),t.set.call(this._usp,n?"?"+n:"")}function o(n){e.delete.call(this,n),n=this.toString(),t.set.call(this._usp,n?"?"+n:"")}function i(n,r){e.set.call(this,n,r),n=this.toString(),t.set.call(this._usp,n?"?"+n:"")}return function(e,t){return e.append=r,e.delete=o,e.set=i,n(e,"_usp",{configurable:!0,writable:!0,value:t})}}(f)),t.defineProperties(c,{href:{get:function(){return l.get.call(this)},set:function(e){var t=this._searchParams;l.set.call(this,e),t&&o(t)}},search:{get:function(){return f.get.call(this)},set:function(e){var t=this._searchParams;f.set.call(this,e),t&&o(t)}},searchParams:{get:function(){return i(this,s),this._searchParams||a(this,new URLSearchParams(this.search.slice(1)))},set:function(e){i(this,s),a(this,e)}}}))};try{s(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&s(URL)}catch(e){}}(Object)}(r.URLSearchParams.prototype,Object),t.default=r.URLSearchParams},function(e,t,n){(function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,s=void 0,a=function(e,t){h[o]=e,h[o+1]=t,2===(o+=2)&&(s?s(y):_())};var c="undefined"!=typeof window?window:void 0,u=c||{},l=u.MutationObserver||u.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(y,1)}}var h=new Array(1e3);function y(){for(var e=0;e<o;e+=2){(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0}o=0}var _=void 0;function v(e,t){var n=this,r=new this.constructor(E);void 0===r[b]&&M(r);var o=n._state;if(o){var i=arguments[o-1];a(function(){return I(o,r,i,n._result)})}else N(n,r,e,t);return r}function m(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(E);return w(t,e),t}_=f?function(){return t.nextTick(y)}:l?function(){var e=0,t=new l(y),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():p?function(){var e=new MessageChannel;return e.port1.onmessage=y,function(){return e.port2.postMessage(0)}}():void 0===c?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(y)}:d()}catch(e){return d()}}():d();var b=Math.random().toString(36).substring(2);function E(){}var g=void 0,T=1,C=2;function R(t,n,r){n.constructor===t.constructor&&r===v&&n.constructor.resolve===m?function(e,t){t._state===T?A(e,t._result):t._state===C?P(e,t._result):N(t,void 0,function(t){return w(e,t)},function(t){return P(e,t)})}(t,n):void 0===r?A(t,n):e(r)?function(e,t,n){a(function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?w(e,n):A(e,n))},function(t){r||(r=!0,P(e,t))},e._label);!r&&o&&(r=!0,P(e,o))},e)}(t,n,r):A(t,n)}function w(e,t){if(e===t)P(e,new TypeError("You cannot resolve a promise with itself"));else if(function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)){var n=void 0;try{n=t.then}catch(t){return void P(e,t)}R(e,t,n)}else A(e,t)}function O(e){e._onerror&&e._onerror(e._result),S(e)}function A(e,t){e._state===g&&(e._result=t,e._state=T,0!==e._subscribers.length&&a(S,e))}function P(e,t){e._state===g&&(e._state=C,e._result=t,a(O,e))}function N(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+T]=n,o[i+C]=r,0===i&&e._state&&a(S,e)}function S(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?I(n,r,o,i):o(i);e._subscribers.length=0}}function I(t,n,r,o){var i=e(r),s=void 0,a=void 0,c=!0;if(i){try{s=r(o)}catch(e){c=!1,a=e}if(n===s)return void P(n,new TypeError("A promises callback cannot return that same promise."))}else s=o;n._state!==g||(i&&c?w(n,s):!1===c?P(n,a):t===T?A(n,s):t===C&&P(n,s))}var D=0;function M(e){e[b]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var k=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[b]||M(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&A(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===g&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===m){var o=void 0,i=void 0,s=!1;try{o=e.then}catch(e){s=!0,i=e}if(o===v&&e._state!==g)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===L){var a=new n(E);s?P(a,i):R(a,e,o),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===g&&(this._remaining--,e===C?P(r,n):this._result[t]=n),0===this._remaining&&A(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;N(e,void 0,function(e){return n._settledAt(T,t,e)},function(e){return n._settledAt(C,t,e)})},e}();var L=function(){function t(e){this[b]=D++,this._result=this._state=void 0,this._subscribers=[],E!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t(function(t){w(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return L.prototype.then=v,L.all=function(e){return new k(this,e).promise},L.race=function(e){var t=this;return r(e)?new t(function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},L.resolve=m,L.reject=function(e){var t=new this(E);return P(t,e),t},L._setScheduler=function(e){s=e},L._setAsap=function(e){a=e},L._asap=a,L.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=L},L.Promise=L,L})}).call(this,n(34),n(31))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceFingerprinter=void 0;var r=function(){function e(e){this.storageBin=e}return e.prototype.getDeviceFingerprint=function(){return this.storageBin.getValue()||this.storageBin.setValue("pos-"+Math.random().toString(36).substring(2)),this.storageBin.getValue()},e}();t.DeviceFingerprinter=r,t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageMgr=t.InMemoryStorageBin=t.LocalStorageBin=void 0;var r=function(){function e(e){this.binName=e}return e.isEnabled=function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}},e.prototype.setValue=function(e){localStorage.setItem(this.binName,JSON.stringify(e))},e.prototype.getValue=function(){var e=localStorage.getItem(this.binName);return null==e?e:JSON.parse(e)},e.prototype.clearValue=function(){localStorage.setItem(this.binName,null)},e}();t.LocalStorageBin=r;var o=function(){function e(e){this.binName=e}return e.isEnabled=function(){return!0},e.prototype.setValue=function(t){e.storageMap[this.binName]=t},e.prototype.getValue=function(){return e.storageMap[this.binName]||null},e.prototype.clearValue=function(){e.storageMap[this.binName]=null},e.storageMap={},e}();t.InMemoryStorageBin=o;var i=function(){function e(e){void 0===e&&(e="pos"),this.namespace=e}return e.prototype.getStorageBin=function(e){var t=this.namespace+"-"+e;return r.isEnabled()?new r(t):new o(t)},e}();t.StorageMgr=i},function(e,t,n){(function(t){function n(e){var t=i([["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]]).filter(function(t){return t.rule&&t.rule.test(e)})[0];return t?t.name:null}function r(){return void 0!==t&&t.version&&{name:"node",version:t.version.slice(1),os:t.platform}}function o(e){var t=i([["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/]]);if(!e)return null;var r=t.map(function(t){var n=t.rule.exec(e),r=n&&n[1].split(/[._]/).slice(0,3);return r&&r.length<3&&(r=r.concat(1==r.length?[0,0]:[0])),n&&{name:t.name,version:r.join(".")}}).filter(Boolean)[0]||null;return r&&(r.os=n(e)),/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/i.test(e)&&((r=r||{}).bot=!0),r}function i(e){return e.map(function(e){return{name:e[0],rule:e[1]}})}e.exports={detect:function(){return"undefined"!=typeof navigator?o(navigator.userAgent):r()},detectOS:n,getNodeVersion:r,parseUserAgent:o}}).call(this,n(34))},function(e){e.exports={name:"pos-js",pos:{minRabbitVersion:{RACCOON:"3.0.0.19",ANDROID_READER:"0.0.0.1"}},version:"1.3.2",license:"MIT",scripts:{build:"tsc","build:bundle":"webpack --config webpack.config.js --mode=production","build:bundle:analyze":"ANALYZE=true webpack --config webpack.config.js --mode=production","build:bundle:watch":"webpack --config webpack.config.js --mode=production --watch","build:dev":"SOURCEMAP_ENABLED=true webpack --config webpack.config.js --mode=development","build:dev:watch":"SOURCEMAP_ENABLED=true webpack --config webpack.config.js --mode=development --watch",develop:"yarn serve & yarn watch","install-prepush":'ln -s "$HOME/stripe/pos-js-v1/scripts/hooks/check-before-push" "$HOME/stripe/pos-js-v1/.git/hooks/pre-push"',lint:"jest --config 'jest.eslint.config.js'","lint:ci":"IS_CI=true jest --config 'jest.eslint.config.js' --ci",prettier:'prettier --write "**/*.{ts,js}"',protos:"./scripts/genProtoTypes.sh",serve:"simplehttpserver dist -p 8021",test:"yarn test:unit && yarn test:integration","test:functional":"./scripts/run_functionals.sh","test:functional:debug":"CHROME_DEBUG=true ./scripts/run_functionals.sh","test:integration":"node otter/integration/server/server.js","test:unit":"jest --config 'jest.config.js'","test:unit:ci":"IS_CI=true jest --config 'jest.config.js' --coverage --ci","test:unit:debug":"echo '!!!!!! Visit chrome://inspect/#devices in chrome and click on `inspect` on the related node device. Ignore the advice below.' && node --inspect-brk ./node_modules/.bin/jest --config jest.config.js --runInBand","typecheck:ci":"/usr/local/bin/junit-script-output sdk-tsc-check tsc",watch:"webpack --config webpack.config.js --watch --mode=development"},private:!0,dependencies:{"@sentry/browser":"^5.13.2","@types/google-protobuf":"^3.7.2","@types/promise":"^7.1.30","@ungap/url-search-params":"^0.1.2","detect-browser":"^3.0.0","es6-promise":"^4.2.8","eslint-plugin-jsx-a11y":"^6.2.3","eslint-plugin-react":"^7.15.1","eslint-plugin-react-hooks":"^1.7.0","url-search-params-polyfill":"^7.0.0","whatwg-fetch":"^2.0.4"},devDependencies:{"@types/detect-browser":"^2.0.1","@types/jest":"^22.0.1","@types/node":"^12.12.50","@types/ungap__url-search-params":"^0.1.0","@typescript-eslint/eslint-plugin":"^2.22.0","@typescript-eslint/parser":"^2.22.0","@wdio/browserstack-service":"^5.18.1","@wdio/cli":"^5.18.6","@wdio/dot-reporter":"^5.18.6","@wdio/junit-reporter":"^5.18.6","@wdio/local-runner":"^5.18.6","@wdio/mocha-framework":"^5.18.6","@wdio/sauce-service":"^5.16.10","@wdio/spec-reporter":"^5.18.6","@wdio/sync":"^5.18.6",chromedriver:"2.43",dotenv:"^8.2.0",eslint:"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-airbnb-typescript":"^6.3.1","eslint-config-prettier":"^6.9.0","eslint-plugin-import":"^2.19.1","eslint-plugin-jest":"^23.2.0","eslint-plugin-prettier":"^3.1.2",jest:"^25.1.0","jest-junit":"^10.0.0","jest-runner-eslint":"^0.7.5",minimist:"^1.2.0",prettier:"^1.16.4","pretty-bytes":"^5.3.0",promise:"7.1.1",protobufjs:"^6.8.9",simplehttpserver:"^0.3.0",stripe:"^7.14.0",supertest:"^4.0.2","ts-jest":"^22.0.1","ts-loader":"^4.1.0","ts-node":"3.2.0",tslint:"5.5.0",typescript:"3.9.6","wdio-chromedriver-service":"^5.0.2",webpack:"4.3.0","webpack-bundle-analyzer":"^3.7.0","webpack-cli":"2.0.13"},engines:{node:"12.16.1",yarn:"1.21.1"}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=t.RpcEndpoint=void 0;var i=n(17);Object.defineProperty(t,"RpcEndpoint",{enumerable:!0,get:function(){return i.RpcEndpoint}});var s=n(32);t.Terminal=s.default,o(n(12),t),o(n(45),t),o(n(18),t),o(n(19),t),o(n(28),t)}]);